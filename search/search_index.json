{"config":{"lang":["es"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Home","text":""},{"location":"#bienvenido-a-la-documentacion-de-blosteflix","title":"Bienvenido a la documentacion de Blosteflix","text":"<p>Blosteflix es un proyecto de desarrollo de una app al estilo Netflix. Esta formado por varios componentes cada uno con su responsabilidad, entre ellos tenemos:</p> <ul> <li>Repoductor video, hecho en Flutter</li> <li>Un gestor de los videos subidos a la plataforma, hecho en Vue</li> <li>Un servidor API REST que muestra el cat\u00e1logo, hecho en Spring</li> <li>Un servidor de contenido HLS, hecho en hls</li> <li>Y a futuro una pasarela de pagos administrada mediante Odoo.</li> </ul> <p>## Documentaci\u00f3n FFmpeg  Una soluci\u00f3n para grabar, convertir y transmitir audio y v\u00eddeo. </p> <p>FFmpeg incluye: + ffmpeg: El comando principal para convertir (transcodificar) archivos multimedia.</p> <ul> <li> <p>ffplay: Un reproductor multimedia simple.</p> </li> <li> <p>ffprobe: Para analizar y obtener informaci\u00f3n de archivos multimedia.</p> </li> <li> <p>Librer\u00edas (libavcodec, libavformat, etc.): El coraz\u00f3n del proyecto, usadas por miles de aplicaciones (VLC, OBS, Chrome, etc.).</p> </li> </ul> <p>El flujo de procesamiento que siguen los videos es: </p><pre><code>[Archivo de Entrada] \u2192 [Demuxer] \u2192 [Paquetes Codificados] \u2192 [Decoder] \u2192 [Frames/Crudos] \u2192 [Filtros] \u2192 [Frames/Procesados] \u2192 [Encoder] \u2192 [Paquetes Codificados] \u2192 [Muxer] \u2192 [Archivo de Salida]\n</code></pre><p></p>"},{"location":"catalogo-backend/","title":"Backend cat\u00e1logo","text":""},{"location":"catalogo-backend/#backend-catalogo","title":"Backend cat\u00e1logo","text":"<p>Documentaci\u00f3n del backend cat\u00e1logo.</p>"},{"location":"catalogo-backend/#endpoints","title":"ENDPOINTS:","text":"<pre><code>        BUSCAR TODO         --&gt; api/catalogo\nGET:    BUSCAR POR CATEGOR\u00cdA--&gt; api/catalogo/categoria\n        BUSCAR POR TITULO   --&gt; api/catalogo/titulo\n\nPOST:   SUBIR ENTRADA-CATALOGO--&gt; api/catalogo/:id\n\nPUT:   MODIFICAR VIDEO--&gt; api/catalogo/:id\n\nDELETE:   ELIMINAR VIDEO--&gt; api/catalogo/:id\n</code></pre>"},{"location":"catalogo-backend/#casos-de-uso","title":"CASOS DE USO","text":"graph TD     U2[Usuario: App Usuario]     U3[Usuario: App Admin]      UC2[Consultar cat\u00e1logo completo]     UC3[Consultar por categor\u00eda]     UC4[Consultar por t\u00edtulo]      U2 --&gt; UC2     U2 --&gt; UC3     U2 --&gt; UC4      UC5[Subir video]     UC6[Modificar video]     UC7[Eliminar video]      U3 --&gt; UC5     U3 --&gt; UC6     U3 --&gt; UC7"},{"location":"catalogo-backend/#diagrama-entidad-relacion","title":"Diagrama Entidad Relaci\u00f3n","text":"erDiagram     VIDEO {         int id PK         string titulo         int duracion         string thumbnail         string url         string creador     }      GENERO {         int id PK         string tipo     }      VIDEO_GENERO {         int video_id FK         int genero_id FK     }      VIDEO ||--o{ VIDEO_GENERO : \"tiene\"     GENERO ||--o{ VIDEO_GENERO : \"clasifica\"     VIDEO }o--o{ GENERO : \"muchos_a_muchos\""},{"location":"enpoints/","title":"Endpoints","text":""},{"location":"enpoints/#endpoints","title":"Endpoints","text":""},{"location":"enpoints/#endpoints-del-catalogo","title":"Endpoints del cat\u00e1logo","text":""},{"location":"enpoints/#endpoints-get","title":"Endpoints GET","text":"<p><code>/api/catalog</code>: devuelve la lista con todos los videos que hay en la bd (por ahora) <code>/api/catalog/:id</code>: devuelve el video con el id que coincide <code>/api/catalog/:topic</code>: devuelve una lista de videos que coinciden con el t\u00f3pico</p>"},{"location":"enpoints/#endpoints-post","title":"Endpoints POST","text":"<p><code>api/catalog/new</code>: recibe un json con el objeto de videoEntry</p>"},{"location":"enpoints/#enpoints-del-videoserver","title":"Enpoints del VideoServer","text":""},{"location":"enpoints/#endpoints-get_1","title":"Endpoints GET","text":"<p><code>api/hls/:videoid</code> : Envia los videos en formato hls para que el cliente pueda reproducir</p>"},{"location":"enpoints/#endpoints-post_1","title":"Endpoints POST","text":"<p><code>api/videoserver/upload</code> : Recibe un video en bruto, devuelve los metadatos t\u00e9cnicos (duracion, resolucion, codec, bitrate, fps, tama\u00f1o, audio tracks)</p>"},{"location":"pasarela-pagos/","title":"Pasarela","text":""},{"location":"pasarela-pagos/#diagrama-e-r","title":"Diagrama E-R","text":"erDiagram     PERSONA {         int id PK         string username         string password         string name         string surname         string address         string phone         string dni     }      ADMIN {         int id PK     }      USUARIO {         int id PK     }      SUSCRIPCION {         int id PK         int usuario_id FK         string tipo         datetime fecha_inicio         datetime fecha_fin     }      METODO_PAGO {         int id PK         int usuario_id FK         string tipo         string detalles     }      ROL {         int id PK         string nombre         string descripcion     }      ADMIN_ROL {         int admin_id FK         int rol_id FK     }      PERSONA ||--|| ADMIN : \"herencia\"     PERSONA ||--|| USUARIO : \"herencia\"      USUARIO ||--o{ SUSCRIPCION : \"tiene\"     USUARIO ||--o{ METODO_PAGO : \"posee\"      ADMIN ||--o{ ADMIN_ROL : \"asignado_a\"     ROL ||--o{ ADMIN_ROL : \"incluye\"     ADMIN }o--o{ ROL : \"muchos_a_muchos\""},{"location":"pasarela-pagos/#diagrama-cu","title":"Diagrama CU","text":"flowchart LR      Usuario[\ud83d\udc64 Usuario]     Admin[\ud83d\udee0\ufe0f Administrador]     subgraph Sistema Suscripciones         UC1(Registrarse)         UC2(Gestionar M\u00e9todo de Pago)         UC3(Gestionar Suscripci\u00f3n)         UC4(Iniciar Sesi\u00f3n)         UC5(Gestionar Usuarios)         UC6(Gestionar Roles)         UC7(Gestionar Suscripciones)         UC8(Asignar Roles a          Administradores)     end      Usuario --&gt; UC1     Usuario --&gt; UC2     Usuario --&gt; UC3     Usuario --&gt; UC4      Admin --&gt; UC4     Admin --&gt; UC5     Admin --&gt; UC6     Admin --&gt; UC7     Admin --&gt; UC8"},{"location":"pasarela-pagos/#endpoints","title":"Endpoints","text":""},{"location":"prueba/","title":"Prueba","text":"erDiagram     ASSET {         uuid id PK         varchar title         varchar subtitle         text description         varchar type         varchar status         varchar language         int duration_seconds         uuid primary_category_id FK         uuid license_id FK         timestamp created_at         timestamp updated_at     }      CATEGORY {         uuid id PK         varchar name         uuid parent_id FK     }      TAG {         uuid id PK         varchar name     }      ASSET_TAG {         uuid asset_id PK,FK         uuid tag_id PK,FK     }      PERSON {         uuid id PK         varchar name         varchar role     }      ASSET_PERSON {         uuid asset_id PK,FK         uuid person_id PK,FK         varchar role_detail     }      LICENSE {         uuid id PK         varchar name         date start_date         date end_date         varchar territory         text notes     }      CATEGORY ||--o{ ASSET : \"primary / contains\"     ASSET ||--o{ ASSET_TAG : \"has\"     TAG ||--o{ ASSET_TAG : \"tagged in\"     ASSET ||--o{ ASSET_PERSON : \"credits\"     PERSON ||--o{ ASSET_PERSON : \"credited in\"     LICENSE ||--o{ ASSET : \"licensed by\" erDiagram     MEDIA_FILE {         uuid id PK         uuid asset_id FK         varchar storage_path         varchar filename         varchar mime_type         bigint size_bytes         int bitrate         varchar resolution         varchar quality         varchar checksum         int duration_seconds         varchar status         timestamp created_at         timestamp updated_at     }      INGEST_JOB {         uuid id PK         uuid media_id FK         varchar source_uri         varchar status         timestamp started_at         timestamp finished_at         text logs     }      TRANSCODE_JOB {         uuid id PK         uuid media_id FK         varchar target_profile         varchar status         timestamp started_at         timestamp finished_at         uuid output_media_id FK     }      STORAGE_LOCATION {         uuid id PK         varchar provider         varchar bucket         varchar region     }      PLAYBACK_EVENT {         uuid id PK         uuid user_id         uuid asset_id         uuid media_id         timestamp event_at         int position_seconds         varchar event_type         varchar device     }      STORAGE_LOCATION ||--o{ MEDIA_FILE : \"stores\"     MEDIA_FILE ||--o{ INGEST_JOB : \"ingested by\"     MEDIA_FILE ||--o{ TRANSCODE_JOB : \"transcoded by\"     MEDIA_FILE ||--o{ PLAYBACK_EVENT : \"played as\" erDiagram     \"USER\" {         uuid id PK         varchar email         varchar password_hash         varchar name         timestamp created_at         timestamp updated_at         varchar status     }      PLAN {         uuid id PK         varchar name         int price_cents         varchar currency         varchar billing_period         text description     }      SUBSCRIPTION {         uuid id PK         uuid user_id FK         uuid plan_id FK         date start_date         date end_date         varchar status         varchar recurring_id     }      ENTITLEMENT {         uuid id PK         uuid user_id FK         uuid asset_id FK         timestamp granted_at         timestamp expires_at         varchar source     }      PAYMENT {         uuid id PK         uuid subscription_id FK         int amount_cents         varchar currency         varchar status         timestamp paid_at         varchar provider_ref     }      DEVICE {         uuid id PK         uuid user_id FK         varchar device_uuid         timestamp last_seen_at         varchar name     }      \"USER\" ||--o{ SUBSCRIPTION : \"has\"     PLAN ||--o{ SUBSCRIPTION : \"offers\"     \"USER\" ||--o{ ENTITLEMENT : \"has\"     SUBSCRIPTION ||--o{ PAYMENT : \"payments\"     \"USER\" ||--o{ DEVICE : \"owns\" graph LR     subgraph Cataleg_DB     end      subgraph Continguts_DB         M[MediaFile]         S[StorageLocation]         I[IngestJob]         T[TranscodeJob]     end      subgraph Subscriptions_DB         U[User]         E[Entitlement]         Sub[Subscription]     end      A -- \"1..* media (asset_id)\" --&gt; M     M -- \"stored en\" --&gt; S     M -- \"ingest/transcode\" --&gt; I     M -- \"transcode jobs\" --&gt; T      U -- \"0..* entitlements\" --&gt; E     A -- \"0..* entitlements (asset_id)\" --&gt; E      click A \"#note\" \"Cat\u00e0leg contiene metadata; IDs (uuid) referenciados por otros servicios\"     classDef dbs fill:#f4f4f4,stroke:#333,stroke-width:1px;     class Cataleg_DB,Continguts_DB,Subscriptions_DB dbs      %% Nota: las FK cross-db se mantienen como uuid y se validan por API/eventos."},{"location":"video-backend/","title":"Documentaci\u00f3n del servidor HLS de videos.","text":""},{"location":"video-backend/#documentacion-del-servidor-hls-de-videos","title":"Documentaci\u00f3n del servidor HLS de videos.","text":""},{"location":"video-backend/#descripcion","title":"Descripci\u00f3n","text":"<p>Servidor express encargado de servir los videos mediante HLS.</p>"},{"location":"video-backend/#responsabilidades","title":"Responsabilidades","text":"<ul> <li>Comprobar suscripciones</li> <li>Reproducir videos </li> <li>Guardar y procesar videos</li> </ul>"},{"location":"video-backend/#interacion","title":"Interacion","text":"<p>Este componente interactua con: + Video Player + Admin App + Suscripciones odoo (sin implementar)</p>"},{"location":"video-backend/#endpoints","title":"Endpoints","text":""},{"location":"video-backend/#endpoints-get","title":"Endpoints GET","text":"<p><code>api/hls/:videoid</code> : Envia los videos en formato hls para que el cliente pueda reproducir</p>"},{"location":"video-backend/#endpoints-post","title":"Endpoints POST","text":"<p><code>api/videoserver/upload</code> : Recibe un video en bruto, devuelve los metadatos t\u00e9cnicos (duracion, resolucion, codec, bitrate, fps, tama\u00f1o, audio tracks)</p>"},{"location":"video-backend/#casos-de-uso","title":"Casos de uso","text":"flowchart LR     Player([\ud83c\udfac Video Player])     Admin([\ud83d\udc64 Admin App ])      subgraph Servidor_HLS         DescargarSegmentos((Descargar segmentos))         SubirVideo((Subir video original))     end      Player --&gt; DescargarSegmentos     Admin --&gt; SubirVideo"},{"location":"video-backend/#diagramas-de-flujo","title":"Diagramas de flujo","text":""},{"location":"video-backend/#reproducir-video","title":"Reproducir video","text":"<pre><code>@startuml\nparticipant VideoReproductor\nparticipant VideoServer\n\nVideoReproductor -&gt; VideoServer : GET /api/hls/:id\nactivate VideoServer\n\nVideoServer -&gt; VideoServer : Validar token\nVideoServer -&gt; VideoServer : Comprobar v\u00eddeo disponible\nVideoServer --&gt; VideoReproductor : master.m3u8\nalt Acceso no valido o v\u00eddeo no disponible\nelse Acceso inv\u00e1lido\n    VideoServer --&gt; VideoReproductor : 401 Unauthorized\nelse V\u00eddeo no disponible\n    VideoServer --&gt; VideoReproductor : 404 Not Found\nend\n\ndeactivate VideoServer\n\nVideoReproductor -&gt; VideoServer : GET /api/hls/:id/:segment\nactivate VideoServer\n\nVideoServer -&gt; VideoServer : Validar token\nVideoServer -&gt; VideoServer : Comprobar segmento existe\n\nalt Segmento v\u00e1lido\n    VideoServer --&gt; VideoReproductor : Segmento .ts\nelse Segmento no encontrado\n    VideoServer --&gt; VideoReproductor : 404 Not Found\nend\n\ndeactivate VideoServer\n@enduml\n</code></pre>"},{"location":"video-backend/#subir-video","title":"Subir video","text":"<pre><code>@startuml\nactor GestorWeb\nparticipant VideoServer\nparticipant CatalogoServer\n\nGestorWeb -&gt; VideoServer : POST /api/videos (archivo de v\u00eddeo)\nVideoServer -&gt; VideoServer : Validar formato\nVideoServer -&gt; VideoServer : Extraer metadatos t\u00e9cnicos\nVideoServer -&gt; VideoServer : Trocear v\u00eddeo,\nVideoServer --&gt; GestorWeb : Metadatos t\u00e9cnicos\\n(duraci\u00f3n, resoluci\u00f3n, codec)\n\nGestorWeb -&gt; GestorWeb : A\u00f1adir metadatos de negocio\\n(t\u00edtulo, descripci\u00f3n, categor\u00eda)\n\nGestorWeb -&gt; CatalogoServer : POST /api/catalogo/videos\\n(metadatos completos)\nCatalogoServer -&gt; CatalogoServer : Guardar informaci\u00f3n del v\u00eddeo\nCatalogoServer --&gt; GestorWeb : Confirmaci\u00f3n de registro\n@enduml\n</code></pre>"},{"location":"frontend/app-admin/","title":"App admin","text":""},{"location":"frontend/app-admin/#app-admin","title":"App admin","text":"<p>Los casos de uso esenciales son: iniciar sesi\u00f3n, subir video, confirmar y registrar video.</p>"},{"location":"frontend/app-client/","title":"App client","text":""},{"location":"frontend/app-client/#app-de-consulta-y-reproduccion","title":"App de consulta y reproducci\u00f3n","text":"<p>Los casos de uso esenciales son: validar subscripci\u00f3n, reproducir video, iniciar sesi\u00f3n y continuar visualitzaci\u00f3</p>"},{"location":"frontend/app-subscripciones/","title":"App subscripciones","text":""},{"location":"frontend/app-subscripciones/#app-subscripcion","title":"App subscripci\u00f3n","text":"<p>Los casos de uso esenciales son: Crear compte, iniciar sesi\u00f3n, contratar subscripci\u00f3n, incluir m\u00e9todo de pago y cancelar subscripci\u00f3n.</p>"}]}