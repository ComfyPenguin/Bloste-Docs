{"config":{"lang":["es"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Inicio","text":""},{"location":"#bienvenido-a-la-documentacion-de-blosteflix","title":"Bienvenido a la documentacion de Blosteflix","text":"<p>Blosteflix es un proyecto de desarrollo de una app al estilo Netflix. Esta formado por varios componentes cada uno con su responsabilidad, entre ellos tenemos:</p> <ul> <li>Repoductor video, hecho en Flutter</li> <li>Un gestor de los videos subidos a la plataforma, hecho en Vue</li> <li>Un servidor API REST que muestra el cat\u00e1logo, hecho en Spring</li> <li>Un servidor de contenido HLS, hecho en hls</li> <li>Y a futuro una pasarela de pagos administrada mediante Odoo.</li> </ul>"},{"location":"#diagrama-c4","title":"Diagrama C4","text":"C4Context title Diagrama C4 \u2013 Nivel 1 (Contexto) \u2013 blosteflix  Person(usuario, \"\ud83d\udc64 Usuario\", \"Consume contenido en streaming\") Person(admin, \"\ud83d\udee0\ufe0f Administrador\", \"Gestiona v\u00eddeos, cat\u00e1logo y usuarios\")  System(blosteflix, \"\ud83c\udfac blosteflix\", \"Plataforma de streaming de v\u00eddeo bajo demanda\")  System_Ext(videoServer, \"\ud83d\udcf9 Servidor de V\u00eddeo\", \"Almacena y sirve contenido multimedia (HLS)\") System_Ext(catalogo, \"\ud83d\udcda Servidor de Cat\u00e1logo (Spring Boot)\", \"Gestiona metadatos de pel\u00edculas y series\") System_Ext(pagos, \"\ud83d\udcb3 Pasarela de Pagos (Odoo)\", \"Gesti\u00f3n de pagos y suscripciones\")  Rel(usuario, blosteflix, \"Reproduce v\u00eddeos, gestiona su suscripci\u00f3n\") Rel(admin, blosteflix, \"Administra v\u00eddeos y cat\u00e1logo\")  Rel(blosteflix, videoServer, \"Solicita playlists y segmentos HLS\") Rel(blosteflix, catalogo, \"Consulta y gestiona metadatos\") Rel(blosteflix, pagos, \"Gestiona pagos y suscripciones\") C4Container title Diagrama C4 \u2013 Nivel 2 (Contenedores) \u2013 blosteflix  Person(usuario, \"\ud83d\udc64 Usuario\", \"Consume contenido en streaming\") Person(admin, \"\ud83d\udee0\ufe0f Administrador\", \"Gestiona v\u00eddeos, cat\u00e1logo y usuarios\")  System_Boundary(blosteflix, \"\ud83c\udfac blosteflix\") {      Container(appClient, \"\ud83d\udcf1 App Cliente\", \"Web / App m\u00f3vil\", \"Reproducci\u00f3n de v\u00eddeo y navegaci\u00f3n del cat\u00e1logo\")     Container(appAdmin, \"\ud83e\uddd1\u200d\ud83d\udcbc App Administrador\", \"Aplicaci\u00f3n web\", \"Gesti\u00f3n de v\u00eddeos, usuarios y cat\u00e1logo\")      Container(catalogoApi, \"\ud83d\udcda Servidor de Cat\u00e1logo\", \"API Spring Boot\", \"Gesti\u00f3n de metadatos de pel\u00edculas y series\")     Container(mediaServer, \"\ud83d\udcf9 Media Server\", \"Node.js + Express\", \"Almacenamiento y streaming HLS\") }  System_Ext(pagos, \"\ud83d\udcb3 Pasarela de Pagos\", \"Odoo\", \"Gesti\u00f3n de pagos y suscripciones\")  ContainerDb(catalogoDb, \"\ud83d\uddc4\ufe0f BD Cat\u00e1logo\", \"PostgreSQL\", \"Metadatos del contenido\") ContainerDb(mediaDb, \"\ud83d\uddc4\ufe0f BD Media\", \"Sistema de ficheros / BD\", \"V\u00eddeos y segmentos HLS\") ContainerDb(pagosDb, \"\ud83d\uddc4\ufe0f BD Pagos\", \"PostgreSQL\", \"Pagos y suscripciones\")  Rel(usuario, appClient, \"Utiliza\") Rel(admin, appAdmin, \"Utiliza\")  Rel(appClient, catalogoApi, \"Consulta cat\u00e1logo (REST)\") Rel(appClient, mediaServer, \"Reproduce v\u00eddeo (HLS)\")  Rel(appAdmin, catalogoApi, \"Gestiona metadatos (REST)\") Rel(appAdmin, mediaServer, \"Sube v\u00eddeos\")  Rel(catalogoApi, catalogoDb, \"Lee / Escribe\") Rel(mediaServer, mediaDb, \"Almacena contenido\")  Rel(appClient, pagos, \"Gestiona suscripci\u00f3n\") Rel(appAdmin, pagos, \"Gesti\u00f3n administrativa\") Rel(pagos, pagosDb, \"Persistencia\")  C4Component title Diagrama C4 \u2013 Nivel 3 \u2013 Componentes del Servidor de Cat\u00e1logo  Container(catalogoApi, \"\ud83d\udcda Servidor de Cat\u00e1logo\", \"Spring Boot\", \"Gesti\u00f3n de metadatos del contenido\")  Component(controller, \"\ud83c\udfae Controllers REST\", \"Spring MVC\", \"Exponen endpoints del cat\u00e1logo\") Component(service, \"\ud83e\udde0 Servicios de Dominio\", \"Spring Service\", \"L\u00f3gica de negocio del cat\u00e1logo\") Component(repository, \"\ud83d\uddc4\ufe0f Repositorios\", \"Spring Data JPA\", \"Acceso a datos\") Component(search, \"\ud83d\udd0d Motor de B\u00fasqueda\", \"JPA / Queries\", \"B\u00fasqueda y filtrado de contenidos\")  ContainerDb(db, \"\ud83d\uddc4\ufe0f BD Cat\u00e1logo\", \"PostgreSQL\", \"Metadatos\")  Rel(controller, service, \"Llama\") Rel(service, repository, \"Usa\") Rel(service, search, \"Consulta\") Rel(repository, db, \"Lee / Escribe\")  Rel_U(catalogoApi, controller, \"HTTP REST\")  C4Component title Diagrama C4 \u2013 Nivel 3 \u2013 Componentes del Media Server  Container(mediaServer, \"\ud83d\udcf9 Media Server\", \"Node.js + Express\", \"Gesti\u00f3n y streaming de v\u00eddeo HLS\")  Component(upload, \"\u2b06\ufe0f Upload Controller\", \"Express Route\", \"Recepci\u00f3n de archivos de v\u00eddeo\") Component(metadata, \"\ud83d\udcca Metadata Extractor\", \"FFmpeg\", \"Extracci\u00f3n de metadatos t\u00e9cnicos\") Component(hls, \"\ud83d\udce6 HLS Processor\", \"FFmpeg\", \"Segmentaci\u00f3n y generaci\u00f3n HLS\") Component(stream, \"\u25b6\ufe0f Streaming Controller\", \"Express Route\", \"Entrega de playlists y segmentos\") Component(storage, \"\ud83d\udcbe Storage Manager\", \"Filesystem\", \"Gesti\u00f3n de archivos de v\u00eddeo\")  ContainerDb(fs, \"\ud83d\uddc4\ufe0f Almacenamiento\", \"Filesystem\", \"V\u00eddeos originales y HLS\")  Rel(upload, metadata, \"Extrae metadatos\") Rel(upload, storage, \"Guarda v\u00eddeo original\") Rel(metadata, hls, \"Inicia procesamiento\") Rel(hls, storage, \"Genera segmentos HLS\") Rel(stream, storage, \"Lee playlists y segmentos\") Rel(storage, fs, \"Persiste archivos\")  Rel_U(mediaServer, upload, \"HTTP POST\") Rel_U(mediaServer, stream, \"HTTP GET (HLS)\")"},{"location":"#requisitos-funcionales-y-no-funcionales","title":"Requisitos funcionales y no funcionales","text":""},{"location":"#requisitos-funcionales","title":"Requisitos funcionales","text":""},{"location":"#funciones-especificas","title":"Funciones espec\u00edficas","text":"<ul> <li>Se debe permitir a los usuarios registrarse con username y contrase\u00f1a.</li> <li> <p>Se debe permitir a todos los usuarios registrados ver el cat\u00e1logo.</p> </li> <li> <p>Se debe subir el video a la base de datos cuando se confirma y estar disponible en el cat\u00e1logo.</p> </li> <li>Se debe restringir que solo los administradores den de alta a nuevos administradores.</li> <li>Se debe restingir que solo los usuarios accedan a la app reproductor y cat\u00e1logo y que solo los administradores accedan a la app de administrador</li> <li> <p>Los permisos de los administradores se dividen en roles, permiso de videos y permiso de usuarios.</p> </li> <li> <p>Se debe validar la subscripci\u00f3n del usuario con cada interacci\u00f3n relacionada con reproducir video.</p> </li> <li>Se debe cambiar el estado de la subscripci\u00f3n del usuario cuando haga una modificaci\u00f3n en su subscripci\u00f3n.</li> <li>Se debe permitir el pago con targeta.</li> </ul>"},{"location":"#reglas-de-negocio","title":"Reglas de negocio","text":"<ul> <li>Al clicar en una portada del cat\u00e1logo que debe llevar una p\u00e1gina con el video con los detalles del video.</li> <li>Al clicar en el play de un video debe mostrar las opciones, pantalla completa, parar el video, barra de duraci\u00f3n.</li> <li>El titulo de la barra de navegaci\u00f3n debe mostrar el cat\u00e1logo.</li> <li>El bot\u00f3n categor\u00edas debe abrir un desplegable con todos los tipos de video y al clicar en uno mostrarte un cat\u00e1logo con solo los videos que contengan esa categor\u00eda.</li> <li>Al hacer clic en buscar debe aparecer una barra buscadora que busque por t\u00edtulo o por fragmento de t\u00edtulo.</li> </ul>"},{"location":"#requisitos-no-funcionales","title":"Requisitos no funcionales","text":"<ul> <li>Rendimiento, que cargue el video en menos de 5 segundos.</li> <li>Escalabilidad, el c\u00f3digo y la base de datos puedan crecer al ritmo de la aplicaci\u00f3n de manera f\u00e1cil.</li> <li>Seguridad B\u00e1sica, que todo el tr\u00e1fico sea a trav\u00e9s del protocolo HTTPS, que las contrase\u00f1as encriptadas en la base de datos y un sistema de login seguro con tokens que expiran.</li> <li>Compatibilidad, que sea compatible en diferentes navegadores y SO de m\u00f3viles.</li> </ul>"},{"location":"UX_inicial/","title":"UX","text":""},{"location":"UX_inicial/#ux","title":"UX","text":""},{"location":"UX_inicial/#app-client","title":"App client","text":"<p>Vista de cat\u00e1logo de videos</p> <p></p> <p>Al hacer click en el video: se muestran los detalles y muestra la car\u00e1tula del video para hacer play. </p>"},{"location":"UX_inicial/#app-admin","title":"App admin","text":"<p>P\u00e1gina principal para subir videos </p> <p>Modificar los metadatos de cada video, confirmar y guardar. </p>"},{"location":"UX_inicial/#portal-subscripcions","title":"Portal subscripcions","text":"<p>P\u00e1gina para que el usuario se registre. </p> <p>Elecci\u00f3n de el plan de subscripci\u00f3n </p> <p>El usuario rellena sus datos personales </p>"},{"location":"glosario/","title":"Glosario","text":""},{"location":"glosario/#documentacion-ffmpeg","title":"Documentaci\u00f3n FFmpeg","text":"<p>Una soluci\u00f3n para grabar, convertir y transmitir audio y v\u00eddeo.</p> <p>FFmpeg incluye:</p> <ul> <li> <p>ffmpeg: El comando principal para convertir (transcodificar) archivos multimedia.</p> </li> <li> <p>ffplay: Un reproductor multimedia simple.</p> </li> <li> <p>ffprobe: Para analizar y obtener informaci\u00f3n de archivos multimedia.</p> </li> <li> <p>Librer\u00edas (libavcodec, libavformat, etc.): El coraz\u00f3n del proyecto, usadas por miles de aplicaciones (VLC, OBS, Chrome, etc.).</p> </li> </ul> <p>El flujo de procesamiento que siguen los videos es:</p> <p>Note</p> <p>[Archivo de Entrada] \u2192 [Demuxer] \u2192 [Paquetes Codificados] \u2192 [Decoder] \u2192 [Frames/Crudos] \u2192 [Filtros] \u2192 [Frames/Procesados] \u2192 [Encoder] \u2192 [Paquetes Codificados] \u2192 [Muxer] \u2192 [Archivo de Salida]</p>"},{"location":"backend/catalogo_contenidos/","title":"Catalogo (SpringBoot)","text":""},{"location":"backend/catalogo_contenidos/#documentacion-del-microservicio-catalogo","title":"Documentaci\u00f3n del microservicio Cat\u00e1logo","text":""},{"location":"backend/catalogo_contenidos/#descripcion","title":"Descripci\u00f3n","text":"<p>Microservicio Spring Boot encargado de gestionar el cat\u00e1logo de videos y categor\u00edas de la plataforma. Proporciona una API REST para el almacenamiento, consulta y administraci\u00f3n de metadatos de videos y sus clasificaciones por categor\u00edas.</p>"},{"location":"backend/catalogo_contenidos/#responsabilidades","title":"Responsabilidades","text":"<ul> <li>Gestionar el cat\u00e1logo completo de videos</li> <li>Administrar categor\u00edas de contenido</li> <li>Proporcionar b\u00fasqueda y filtrado de videos</li> <li>Gestionar metadatos de videos (t\u00edtulo, descripci\u00f3n, miniaturas)</li> <li>Controlar la visibilidad de contenido (videos ocultos)</li> <li>Autenticar y autorizar operaciones mediante JWT</li> </ul>"},{"location":"backend/catalogo_contenidos/#interaccion","title":"Interacci\u00f3n","text":"<p>Este componente interact\u00faa con: + Administrador de Contenidos (Admin App) + Reproductor de Videos (Video Player) + Servidor HLS de Videos + Gestor de Suscripciones</p>"},{"location":"backend/catalogo_contenidos/#endpoints","title":"Endpoints","text":""},{"location":"backend/catalogo_contenidos/#endpoints-get-videos","title":"Endpoints GET - Videos","text":"<ul> <li><code>GET /api/catalogo?page={int}&amp;size={int}</code> : Obtiene el cat\u00e1logo paginado de videos p\u00fablicos</li> <li><code>GET /api/catalogo/{id}</code> : Obtiene un video espec\u00edfico por su ID</li> <li><code>GET /api/catalogo?categoriaId={int}&amp;page={int}&amp;size={int}</code> : Obtiene videos de una categor\u00eda espec\u00edfica</li> <li><code>GET /api/catalogo/search?titulo={titulo}&amp;page={int}&amp;size={int}</code> : Busca videos por t\u00edtulo , paginado</li> </ul>"},{"location":"backend/catalogo_contenidos/#endpoints-get-categorias","title":"Endpoints GET - Categor\u00edas","text":"<ul> <li><code>GET /api/categorias</code> : Obtiene todas las categor\u00edas disponibles</li> <li><code>GET /api/categorias/{id}</code> : Obtiene una categor\u00eda espec\u00edfica por su ID</li> </ul>"},{"location":"backend/catalogo_contenidos/#endpoints-post","title":"Endpoints POST","text":"<ul> <li><code>POST /api/catalogo/videos</code> : Crea un nuevo video en el cat\u00e1logo (requiere autenticaci\u00f3n de administrador)</li> <li><code>POST /api/categorias</code> : Crea una nueva categor\u00eda (requiere autenticaci\u00f3n de administrador)</li> </ul>"},{"location":"backend/catalogo_contenidos/#endpoints-put","title":"Endpoints PUT","text":"<ul> <li><code>PUT /api/catalogo/videos/{id}</code> : Actualiza los datos de un video existente (requiere autenticaci\u00f3n de administrador)</li> <li><code>PUT /api/categorias/{id}</code> : Actualiza una categor\u00eda existente (requiere autenticaci\u00f3n de administrador)</li> </ul>"},{"location":"backend/catalogo_contenidos/#endpoints-delete","title":"Endpoints DELETE","text":"<p>Delete videos no se usa porque en su lugar se maneja un campo <code>is_hidden</code> para ocultar videos sin eliminarlos f\u00edsicamente.</p> <ul> <li><code>DELETE /api/catalogo/videos/{id}</code> : Elimina un video del cat\u00e1logo (requiere autenticaci\u00f3n de administrador)</li> <li><code>DELETE /api/categorias/{id}</code> : Elimina una categor\u00eda (requiere autenticaci\u00f3n de administrador)</li> </ul>"},{"location":"backend/catalogo_contenidos/#casos-de-uso","title":"Casos de uso","text":"%%{init: {'theme':'base','themeVariables': {'primaryColor':'#0ea5a4','edgeColor':'#065f46','fontFamily':'\"Inter\", Arial'}} }%% graph LR   %% Agrupaci\u00f3n de usuarios   subgraph Usuarios     direction TB     U1[\ud83c\udfac Video Player]     U3[\ud83d\udee0\ufe0f App Admin]   end    %% Casos de uso divididos en dos \u00e1reas   subgraph \"Casos de uso\"     direction LR     subgraph \"Consulta P\u00fablica\"       direction TB       UC1((\ud83d\udd0e Consultar cat\u00e1logo completo))       UC2((\ud83d\udcc2 Consultar por categor\u00eda))       UC3((\ud83d\udd24 Buscar por t\u00edtulo))       UC4((\ud83d\udccb Listar categor\u00edas))     end      subgraph \"Gesti\u00f3n de Videos\"       direction TB       UC5((\u2b06\ufe0f Crear video))       UC6((\u270f\ufe0f Modificar video))       UC7((\ud83d\uddd1\ufe0f Eliminar video\\n(no usado \u2014 soft delete)))       UC8((\ud83d\udc41\ufe0f Ocultar/Mostrar video))     end      subgraph \"Gesti\u00f3n de Categor\u00edas\"       direction TB       UC9((\u2795 Crear categor\u00eda))       UC10((\u270f\ufe0f Modificar categor\u00eda))       UC11((\ud83d\uddd1\ufe0f Eliminar categor\u00eda))     end   end    %% Relaciones - Consulta (Video Player usa GET)   U1 --&gt;|GET| UC1   U1 --&gt;|GET| UC2   U1 --&gt;|GET| UC3   U1 --&gt;|GET| UC4    %% Relaciones - Administraci\u00f3n (Admin usa POST/PUT; DELETE raramente por soft delete)   U3 --&gt;|POST/PUT| UC5   U3 --&gt;|POST/PUT| UC6   U3 --&gt;|DELETE (soft)| UC7   U3 --&gt;|POST/PUT| UC8   U3 --&gt;|POST/PUT| UC9   U3 --&gt;|POST/PUT| UC10   U3 --&gt;|POST/DELETE| UC11    %% Estilos   class U1,U3 usernode   class UC1,UC2,UC3,UC4,UC5,UC6,UC7,UC8,UC9,UC10,UC11 usecase    classDef usernode fill:#e0f2fe,stroke:#0369a1,stroke-width:2px,rx:8px;   classDef usecase fill:#ecfccb,stroke:#65a30d,stroke-width:1.5px,rx:20px;"},{"location":"backend/catalogo_contenidos/#diagrama-entidad-relacion","title":"Diagrama Entidad-Relaci\u00f3n","text":""},{"location":"backend/catalogo_contenidos/#modelo-de-datos","title":"Modelo de datos","text":""},{"location":"backend/catalogo_contenidos/#video","title":"Video","text":"<p>Representa un video en el cat\u00e1logo con sus metadatos de negocio.</p> <p>Campos: - <code>id</code>: Identificador \u00fanico del video - <code>creator</code>: Usuario o entidad que cre\u00f3 el video - <code>title</code>: T\u00edtulo del video - <code>description</code>: Descripci\u00f3n detallada del contenido - <code>duration_seconds</code>: Duraci\u00f3n del video en segundos - <code>url_video</code>: URL del archivo de video procesado (HLS) - <code>url_thumbnail</code>: URL de la miniatura/thumbnail del video - <code>upload_date</code>: Fecha y hora de subida - <code>is_hidden</code>: Indica si el video est\u00e1 oculto o visible p\u00fablicamente</p>"},{"location":"backend/catalogo_contenidos/#categoria","title":"Categoria","text":"<p>Agrupa videos por tem\u00e1tica o tipo de contenido.</p> <p>Campos: - <code>id</code>: Identificador \u00fanico de la categor\u00eda - <code>name</code>: Nombre de la categor\u00eda - <code>description</code>: Descripci\u00f3n de la categor\u00eda</p>"},{"location":"backend/catalogo_contenidos/#video_categoria","title":"Video_Categoria","text":"<p>Tabla de relaci\u00f3n muchos-a-muchos entre videos y categor\u00edas.</p> <p>Campos: - <code>video_id</code>: Referencia al video - <code>categoria_id</code>: Referencia a la categor\u00eda</p>"},{"location":"backend/catalogo_contenidos/#diagramas-de-flujo","title":"Diagramas de flujo","text":""},{"location":"backend/catalogo_contenidos/#consultar-catalogo-de-videos","title":"Consultar cat\u00e1logo de videos","text":""},{"location":"backend/catalogo_contenidos/#buscar-videos-por-categoria","title":"Buscar videos por categor\u00eda","text":""},{"location":"backend/catalogo_contenidos/#crear-nuevo-video","title":"Crear nuevo video","text":""},{"location":"backend/catalogo_contenidos/#modificar-video-existente","title":"Modificar video existente","text":""},{"location":"backend/catalogo_contenidos/#eliminar-video","title":"Eliminar video","text":""},{"location":"backend/catalogo_contenidos/#gestion-de-categorias","title":"Gesti\u00f3n de categor\u00edas","text":""},{"location":"backend/catalogo_contenidos/#arquitectura-y-tecnologias","title":"Arquitectura y Tecnolog\u00edas","text":""},{"location":"backend/catalogo_contenidos/#stack-tecnologico","title":"Stack Tecnol\u00f3gico","text":"<ul> <li>Framework: Spring Boot 3.x</li> <li>Lenguaje: Java 17+</li> <li>Base de Datos: MySQL/PostgreSQL (JPA/Hibernate)</li> <li>Seguridad: Spring Security con JWT</li> <li>API: RESTful API con Jackson</li> <li>Build: Maven</li> </ul>"},{"location":"backend/catalogo_contenidos/#componentes-principales","title":"Componentes principales","text":""},{"location":"backend/catalogo_contenidos/#controllers","title":"Controllers","text":"<ul> <li><code>VideoController</code>: Gestiona endpoints de videos</li> <li><code>CategoriaController</code>: Gestiona endpoints de categor\u00edas</li> </ul>"},{"location":"backend/catalogo_contenidos/#services","title":"Services","text":"<ul> <li><code>VideoService</code>: L\u00f3gica de negocio para videos</li> <li><code>CategoriaService</code>: L\u00f3gica de negocio para categor\u00edas</li> </ul>"},{"location":"backend/catalogo_contenidos/#repositories","title":"Repositories","text":"<ul> <li><code>VideoRepository</code>: Acceso a datos de videos (Spring Data JPA)</li> <li><code>CategoriaRepository</code>: Acceso a datos de categor\u00edas (Spring Data JPA)</li> </ul>"},{"location":"backend/catalogo_contenidos/#security","title":"Security","text":"<ul> <li><code>JwtAuthenticationFilter</code>: Filtro de autenticaci\u00f3n JWT</li> <li><code>JwtTokenProvider</code>: Generaci\u00f3n y validaci\u00f3n de tokens</li> <li><code>SecurityConfig</code>: Configuraci\u00f3n de seguridad</li> <li><code>CorsConfig</code>: Configuraci\u00f3n de CORS</li> </ul>"},{"location":"backend/catalogo_contenidos/#dtos","title":"DTOs","text":"<ul> <li>Public DTOs: Informaci\u00f3n expuesta a usuarios no autenticados</li> <li>Private DTOs: Informaci\u00f3n completa para administradores</li> <li>Post DTOs: Datos para creaci\u00f3n/actualizaci\u00f3n de recursos</li> </ul>"},{"location":"backend/servicio_contenidos/","title":"Servidor de contenidos (ExpressJS)","text":""},{"location":"backend/servicio_contenidos/#servidor-hls-de-videos-expressjs","title":"Servidor HLS de videos (EXPRESSJS)","text":""},{"location":"backend/servicio_contenidos/#descripcion","title":"Descripci\u00f3n","text":"<p>Servidor express encargado de procesar videos en segmentos y servirlos, adem\u00e1s de generar miniaturas y metadatos para los servicios de reproducci\u00f3n.</p>"},{"location":"backend/servicio_contenidos/#responsabilidades","title":"Responsabilidades","text":"<ul> <li>Comprobar autenticaci\u00f3n y autorizaci\u00f3n de los clientes</li> <li>Generar HLS y segmentos de video en distintas resoluciones</li> <li>Generar miniaturas para cada video</li> <li>Generar metadatos t\u00e9cnicos de cada video</li> <li>Servir los segmentos y miniaturas a los clientes</li> </ul>"},{"location":"backend/servicio_contenidos/#interaccion","title":"Interacci\u00f3n","text":"<p>Este componente interactua con:</p> <ul> <li>Video Player (Flutter)</li> <li>Admin App (Vue)</li> <li>Autentificaciones (odoo)</li> </ul>"},{"location":"backend/servicio_contenidos/#endpoints","title":"Endpoints","text":""},{"location":"backend/servicio_contenidos/#endpoints-get","title":"Endpoints GET","text":"<ul> <li><code>api/hls/:videoid</code> : Sirve el mapa hls para que el cliente pueda reproducir el video</li> <li><code>api/thumbnail/:videoid</code> : Sirve la miniatura del video al cliente</li> </ul>"},{"location":"backend/servicio_contenidos/#endpoints-post","title":"Endpoints POST","text":"<ul> <li><code>api/upload</code> : Recibe un video en bruto para procesarlo y generar los segmentos, miniaturas y metadatos t\u00e9cnicos. Este endpoint es utilizado por la Admin App para subir nuevos videos al sistema. Adem\u00e1s, este endpoint se encarga de validar el formato del video, extraer los metadatos t\u00e9cnicos (duraci\u00f3n, resoluci\u00f3n, codec) y devolverlos.</li> </ul>"},{"location":"backend/servicio_contenidos/#casos-de-uso","title":"Casos de uso","text":"flowchart LR     Player([\ud83c\udfac Video Player])     Admin([\ud83d\udc64 Admin App])      subgraph Servidor HLS         DescargarSegmentos((Descargar segmentos HLS))         DescargarThumbnails((Descargar miniaturas))         SubirVideo((Subir video para procesar))     end      Player --&gt; DescargarSegmentos     Player --&gt; DescargarThumbnails     Admin --&gt; SubirVideo"},{"location":"backend/servicio_contenidos/#diagramas-de-flujo","title":"Diagramas de flujo","text":""},{"location":"backend/servicio_contenidos/#reproducir-video","title":"Reproducir video","text":""},{"location":"backend/servicio_contenidos/#recibir-miniatura","title":"Recibir miniatura","text":""},{"location":"backend/servicio_contenidos/#subir-video","title":"Subir video","text":""},{"location":"backend/odoo_doc/bloste_core/","title":"N\u00facleo (bloste_core)","text":""},{"location":"backend/odoo_doc/bloste_core/#pasarela-pagos","title":"Pasarela pagos","text":""},{"location":"backend/odoo_doc/bloste_core/#descripcion","title":"Descripci\u00f3n","text":"<p>Servidor de Odoo para gestionar usuarios, suscripciones y m\u00e9todos de pago. Incluye el m\u00f3dulo personalizado <code>bloste_core</code> que extiende la funcionalidad base de Odoo para adaptarla a las necesidades espec\u00edficas de la plataforma BlosteFlix.</p>"},{"location":"backend/odoo_doc/bloste_core/#responsabilidades","title":"Responsabilidades","text":"<ul> <li>Crear y enviar tokens de seguridad (JWT) para la interacci\u00f3n entre servicios</li> <li>Gestionar altas, bajas, suspensiones y edici\u00f3n de perfiles de usuario</li> <li>Validar m\u00e9todos de pago y gestionar la informaci\u00f3n de tarjetas o cuentas asociadas a los usuarios</li> <li>Registrar nuevos usuarios, autenticar credenciales y manejar el inicio de sesi\u00f3n para distintos roles</li> <li>Crear, modificar y renovar planes de suscripci\u00f3n tanto desde la perspectiva del cliente como del administrador</li> <li>Gestionar el historial de suscripciones de cada usuario</li> <li>Calcular autom\u00e1ticamente fechas de caducidad de suscripciones</li> <li>Controlar permisos y roles (usuario normal vs administrador)</li> </ul>"},{"location":"backend/odoo_doc/bloste_core/#interaccion","title":"Interacci\u00f3n","text":"<p>Este componente interact\u00faa con: + App Admin (Administrador de Contenidos) + Video Player (Reproductor de Videos) + Portal Web + Cat\u00e1logo de Contenidos (validaci\u00f3n de acceso)</p>"},{"location":"backend/odoo_doc/bloste_core/#modulo-bloste-core","title":"M\u00f3dulo Bloste Core","text":""},{"location":"backend/odoo_doc/bloste_core/#descripcion-del-modulo","title":"Descripci\u00f3n del M\u00f3dulo","text":"<p><code>bloste_core</code> es un m\u00f3dulo personalizado de Odoo que extiende la funcionalidad base del sistema para implementar la l\u00f3gica de negocio espec\u00edfica de BlosteFlix. Este m\u00f3dulo gestiona usuarios, planes de suscripci\u00f3n y la relaci\u00f3n entre ambos.</p> <p></p>"},{"location":"backend/odoo_doc/bloste_core/#componentes-del-modulo","title":"Componentes del M\u00f3dulo","text":""},{"location":"backend/odoo_doc/bloste_core/#modelos-models","title":"Modelos (models/)","text":""},{"location":"backend/odoo_doc/bloste_core/#blostesubscription","title":"bloste.subscription","text":"<p>Representa los planes de suscripci\u00f3n disponibles en la plataforma.</p> <p></p> <p>Campos: - <code>name</code>: Nombre del plan (ej: \"Plan B\u00e1sico\", \"Plan Premium\") - <code>price</code>: Precio del plan de suscripci\u00f3n - <code>duration</code>: Duraci\u00f3n en d\u00edas del plan (por defecto 30 d\u00edas) - <code>user_subscription_ids</code>: Relaci\u00f3n con usuarios que tienen este plan - <code>product_id</code>: Vinculaci\u00f3n con producto de venta de Odoo - <code>sale_order_id</code>: Orden de venta asociada - <code>partner_id</code>: Cliente (heredado de sale_order)</p> <p>Responsabilidades: - Definir los diferentes planes de suscripci\u00f3n disponibles - Mantener informaci\u00f3n de precios y duraci\u00f3n - Vincular con el sistema de ventas de Odoo</p>"},{"location":"backend/odoo_doc/bloste_core/#blosteuser_subscription","title":"bloste.user_subscription","text":"<p>Tabla de relaci\u00f3n entre usuarios y sus suscripciones (historial).</p> <p></p> <p>Campos: - <code>user_id</code>: Usuario que tiene la suscripci\u00f3n - <code>subscription_id</code>: Plan de suscripci\u00f3n asociado - <code>start_date</code>: Fecha de inicio (por defecto hoy) - <code>end_date</code>: Fecha de caducidad (calculada autom\u00e1ticamente)</p> <p>M\u00e9todos: - <code>_compute_end_date()</code>: Calcula autom\u00e1ticamente la fecha de caducidad sumando la duraci\u00f3n del plan a la fecha de inicio</p> <p>Responsabilidades: - Mantener historial completo de suscripciones de cada usuario - Calcular autom\u00e1ticamente fechas de vencimiento - Permitir m\u00faltiples suscripciones por usuario (historial)</p>"},{"location":"backend/odoo_doc/bloste_core/#resusers-extension","title":"res.users (extensi\u00f3n)","text":"<p>Extiende el modelo de usuarios est\u00e1ndar de Odoo con funcionalidad espec\u00edfica de BlosteFlix.</p> <p></p> <p>Campos a\u00f1adidos: - <code>user_subscription_ids</code>: Relaci\u00f3n con todas las suscripciones del usuario - <code>bloste_api_uuid</code>: UUID \u00fanico para identificaci\u00f3n en API - <code>bloste_status</code>: Estado del usuario ('user' o 'admin') - <code>is_admin_bloste</code>: Indicador booleano de administrador - <code>active_subscription_id</code>: Suscripci\u00f3n activa actual (calculado) - <code>subscription_expiry_date</code>: Fecha de expiraci\u00f3n de la suscripci\u00f3n activa (calculado) - <code>new_subscription_id</code>: Campo auxiliar para asignar nuevas suscripciones - <code>password_display</code>: Indicador visual de contrase\u00f1a configurada</p> <p>M\u00e9todos clave: - <code>_compute_active_subscription()</code>: Determina cu\u00e1l es la suscripci\u00f3n activa (la que caduca m\u00e1s pronto entre las v\u00e1lidas) - <code>_compute_subscription_expiry()</code>: Obtiene la fecha de caducidad de la suscripci\u00f3n activa - <code>_compute_password_display()</code>: Muestra un indicador visual de contrase\u00f1a - <code>_make_odoo_admin()</code>: Convierte un usuario en administrador de Odoo - <code>_remove_odoo_admin()</code>: Quita permisos de administrador y convierte en usuario portal - <code>create()</code>: Sobrescribe creaci\u00f3n para usar email como login si no se proporciona - <code>write()</code>: Gestiona la l\u00f3gica de asignaci\u00f3n de suscripciones y cambios de rol</p> <p>Responsabilidades: - Gestionar el estado de suscripci\u00f3n de cada usuario - Calcular autom\u00e1ticamente la suscripci\u00f3n activa - Controlar permisos seg\u00fan el rol (usuario/admin) - Mantener sincronizaci\u00f3n entre estado BlosteFlix y permisos Odoo - Gestionar asignaci\u00f3n de nuevas suscripciones</p>"},{"location":"backend/odoo_doc/bloste_core/#producttemplate-extension","title":"product.template (extensi\u00f3n)","text":"<p>Extiende el modelo de productos de Odoo.</p> <p>Campos a\u00f1adidos: - <code>is_subscription_product</code>: Marca si el producto es un plan de suscripci\u00f3n</p> <p>Responsabilidades: - Diferenciar productos de suscripci\u00f3n de otros productos - Integrar suscripciones con el m\u00f3dulo de ventas de Odoo</p>"},{"location":"backend/odoo_doc/bloste_core/#vistas-views","title":"Vistas (views/)","text":"<ul> <li>menu_view.xml: Define el men\u00fa principal \"Bloste Software\" en la interfaz de Odoo</li> <li>subscriptors.xml: Vista para gestionar planes de suscripci\u00f3n</li> <li>user_subscription.xml: Vista para el historial de suscripciones de usuarios</li> <li>res_users.xml: Vista extendida de usuarios con campos personalizados</li> <li>product_view.xml: Vista extendida de productos para marcar planes de suscripci\u00f3n</li> </ul>"},{"location":"backend/odoo_doc/bloste_core/#seguridad-security","title":"Seguridad (security/)","text":"<p>ir.model.access.csv: Define los permisos de acceso a los modelos: - <code>access_bloste_subscription</code>: Permisos completos (CRUD) para usuarios internos - <code>access_bloste_user_subscription</code>: Permisos completos (CRUD) para usuarios internos - <code>access_bloste_res_users</code>: Permisos completos (CRUD) para gesti\u00f3n de usuarios</p>"},{"location":"backend/odoo_doc/bloste_core/#dependencias","title":"Dependencias","text":"<p>El m\u00f3dulo <code>bloste_core</code> depende de: - <code>base</code>: M\u00f3dulo base de Odoo (usuarios, grupos, permisos) - <code>sale</code>: M\u00f3dulo de ventas (\u00f3rdenes, productos) - <code>product</code>: M\u00f3dulo de productos</p>"},{"location":"backend/odoo_doc/bloste_core/#configuracion-del-manifiesto","title":"Configuraci\u00f3n del Manifiesto","text":"<pre><code>{\n    'name': 'Bloste-Software',\n    'version': '1.0',\n    'summary': 'Bloste Software Core Module',\n    'description': 'M\u00f3dulo para la gesti\u00f3n de suscripciones y usuarios, \n                    y creaci\u00f3n y validaci\u00f3n de tokens',\n    'author': 'Bloste Team',\n    'license': 'LGPL-3',\n    'depends': ['base', 'sale', 'product'],\n    'installable': True,\n    'application': True,\n    'auto_install': False,\n}\n</code></pre>"},{"location":"backend/odoo_doc/bloste_core/#diagrama-e-r","title":"Diagrama E-R","text":""},{"location":"backend/odoo_doc/bloste_core/#modelo-de-datos","title":"Modelo de Datos","text":""},{"location":"backend/odoo_doc/bloste_core/#resusers-extendido","title":"res.users (extendido)","text":"<p>Usuarios del sistema con funcionalidad espec\u00edfica de BlosteFlix.</p> <p>Campos est\u00e1ndar: - <code>id</code>: Identificador \u00fanico - <code>login</code>: Nombre de usuario para autenticaci\u00f3n - <code>password</code>: Contrase\u00f1a encriptada - <code>name</code>: Nombre completo - <code>email</code>: Correo electr\u00f3nico - <code>active</code>: Indica si el usuario est\u00e1 activo</p> <p>Campos BlosteFlix: - <code>bloste_api_uuid</code>: UUID para identificaci\u00f3n en API externa - <code>bloste_status</code>: Estado del usuario ('user' o 'admin') - <code>is_admin_bloste</code>: Indica si es administrador de BlosteFlix - <code>active_subscription_id</code>: Referencia a la suscripci\u00f3n activa actual - <code>subscription_expiry_date</code>: Fecha de caducidad calculada - <code>user_subscription_ids</code>: Historial completo de suscripciones</p>"},{"location":"backend/odoo_doc/bloste_core/#blostesubscription_1","title":"bloste.subscription","text":"<p>Planes de suscripci\u00f3n disponibles en la plataforma.</p> <p></p> <p>Campos: - <code>id</code>: Identificador \u00fanico del plan - <code>name</code>: Nombre del plan (ej: \"Plan Mensual\", \"Plan Anual\") - <code>price</code>: Precio del plan - <code>duration</code>: Duraci\u00f3n en d\u00edas (por defecto 30) - <code>product_id</code>: Vinculaci\u00f3n con producto de Odoo - <code>sale_order_id</code>: Orden de venta asociada - <code>partner_id</code>: Cliente (heredado de sale_order) - <code>user_subscription_ids</code>: Usuarios que tienen/tuvieron este plan</p>"},{"location":"backend/odoo_doc/bloste_core/#blosteuser_subscription_1","title":"bloste.user_subscription","text":"<p>Historial de suscripciones de usuarios (relaci\u00f3n usuario-plan).</p> <p></p> <p>Campos: - <code>id</code>: Identificador \u00fanico de la relaci\u00f3n - <code>user_id</code>: Usuario asociado - <code>subscription_id</code>: Plan de suscripci\u00f3n asociado - <code>start_date</code>: Fecha de inicio (por defecto hoy) - <code>end_date</code>: Fecha de caducidad (calculada autom\u00e1ticamente)</p> <p>L\u00f3gica de c\u00e1lculo: - <code>end_date = start_date + duration</code> (de la suscripci\u00f3n)</p>"},{"location":"backend/odoo_doc/bloste_core/#productproduct-extendido","title":"product.product (extendido)","text":"<p>Productos de Odoo extendidos para soportar suscripciones.</p> <p>Campos a\u00f1adidos: - <code>is_subscription_product</code>: Marca si el producto representa un plan de suscripci\u00f3n</p>"},{"location":"backend/odoo_doc/bloste_core/#payment_method","title":"payment_method","text":"<p>M\u00e9todos de pago disponibles.</p> <p>Campos: - <code>id</code>: Identificador \u00fanico - <code>name</code>: Nombre del m\u00e9todo (ej: \"Tarjeta de Cr\u00e9dito\", \"PayPal\") - <code>description</code>: Descripci\u00f3n del m\u00e9todo</p>"},{"location":"backend/odoo_doc/bloste_core/#payment","title":"payment","text":"<p>Historial de pagos realizados.</p> <p>Campos: - <code>id</code>: Identificador \u00fanico - <code>amount</code>: Monto del pago - <code>currency</code>: Moneda (ej: \"EUR\", \"USD\") - <code>status</code>: Estado del pago (PENDING, PAID, FAILED, REFUNDED) - <code>paid_at</code>: Fecha y hora del pago - <code>payment_method_id</code>: M\u00e9todo de pago utilizado - <code>subscription_id</code>: Suscripci\u00f3n asociada</p>"},{"location":"backend/odoo_doc/bloste_core/#casos-de-uso","title":"Casos de uso","text":"%%{init: {'theme':'base','themeVariables': {'primaryColor':'#0ea5a4','edgeColor':'#065f46','fontFamily':'\"Inter\", Arial'}} }%% graph LR   %% Agrupaci\u00f3n de usuarios   subgraph Usuarios     direction TB     U1[Usuario/Cliente]     U2[Administrador]     U3[Portal Web]     U4[Video Player]   end    %% Casos de uso divididos en \u00e1reas   subgraph \"Casos de uso\"     direction LR      subgraph \"Gesti\u00f3n de Usuarios\"       direction TB       UC1((Crear usuario))       UC2((Autenticar usuario))       UC3((Editar perfil))       UC4((Cambiar contrase\u00f1a))       UC5((Activar/Desactivar))     end      subgraph \"Gesti\u00f3n de Suscripciones\"       direction TB       UC6((Crear plan suscripci\u00f3n))       UC7((Asignar suscripci\u00f3n))       UC8((Renovar suscripci\u00f3n))       UC9((Consultar estado))       UC10((Ver historial))       UC11((Cancelar suscripci\u00f3n))     end      subgraph \"Gesti\u00f3n de Roles\"       direction TB       UC12((Asignar admin))       UC13((Revocar admin))       UC14((Gestionar permisos))     end      subgraph \"Gesti\u00f3n de Pagos\"       direction TB       UC15((Registrar m\u00e9todo pago))       UC16((Procesar pago))       UC17((Consultar pagos))       UC18((Reembolsar))     end      subgraph \"Integraci\u00f3n API\"       direction TB       UC19((Generar JWT))       UC20((Validar token))       UC21((Consultar suscripci\u00f3n activa))     end   end    %% Relaciones - Usuario Cliente   U1 --&gt;|POST| UC1   U1 --&gt;|POST| UC2   U1 --&gt;|PUT| UC3   U1 --&gt;|PUT| UC4   U1 --&gt;|GET| UC9   U1 --&gt;|POST| UC15   U1 --&gt;|GET| UC17    %% Relaciones - Administrador   U2 --&gt;|POST/PUT| UC1   U2 --&gt;|POST/PUT| UC5   U2 --&gt;|POST/PUT| UC6   U2 --&gt;|POST| UC7   U2 --&gt;|GET| UC10   U2 --&gt;|POST| UC12   U2 --&gt;|POST| UC13   U2 --&gt;|POST/PUT| UC14   U2 --&gt;|POST| UC16   U2 --&gt;|GET| UC17   U2 --&gt;|POST| UC18    %% Relaciones - Portal Web   U3 --&gt;|POST| UC2   U3 --&gt;|POST| UC8   U3 --&gt;|POST| UC16   U3 --&gt;|GET| UC9    %% Relaciones - Video Player   U4 --&gt;|POST| UC19   U4 --&gt;|POST| UC20   U4 --&gt;|GET| UC21    %% Estilos   class U1,U2,U3,U4 usernode   class UC1,UC2,UC3,UC4,UC5,UC6,UC7,UC8,UC9,UC10,UC11,UC12,UC13,UC14,UC15,UC16,UC17,UC18,UC19,UC20,UC21 usecase    classDef usernode fill:#e0f2fe,stroke:#0369a1,stroke-width:2px,rx:8px;   classDef usecase fill:#ecfccb,stroke:#65a30d,stroke-width:1.5px,rx:20px;"},{"location":"backend/odoo_doc/bloste_core/#diagramas-de-flujo","title":"Diagramas de flujo","text":""},{"location":"backend/odoo_doc/bloste_core/#autenticacion-y-generacion-de-token","title":"Autenticaci\u00f3n y Generaci\u00f3n de Token","text":""},{"location":"backend/odoo_doc/bloste_core/#gestion-de-suscripcion-y-pago","title":"Gesti\u00f3n de Suscripci\u00f3n y Pago","text":""},{"location":"backend/odoo_doc/bloste_core/#asignar-suscripcion-a-usuario-modulo-bloste-core","title":"Asignar Suscripci\u00f3n a Usuario (M\u00f3dulo Bloste Core)","text":""},{"location":"backend/odoo_doc/bloste_core/#calcular-suscripcion-activa","title":"Calcular Suscripci\u00f3n Activa","text":""},{"location":"backend/odoo_doc/bloste_core/#cambiar-rol-de-usuario-user-a-admin","title":"Cambiar Rol de Usuario (User a Admin)","text":""},{"location":"backend/odoo_doc/bloste_core/#crear-usuario-nuevo","title":"Crear Usuario Nuevo","text":""},{"location":"backend/odoo_doc/bloste_core/#consultar-estado-de-suscripcion-api-externa","title":"Consultar Estado de Suscripci\u00f3n (API Externa)","text":""},{"location":"backend/odoo_doc/bloste_core/#arquitectura-y-tecnologias","title":"Arquitectura y Tecnolog\u00edas","text":""},{"location":"backend/odoo_doc/bloste_core/#stack-tecnologico","title":"Stack Tecnol\u00f3gico","text":"<ul> <li>Framework: Odoo 16/17</li> <li>Lenguaje: Python 3.8+</li> <li>Base de Datos: PostgreSQL</li> <li>ORM: Odoo ORM</li> <li>API: RESTful API / XML-RPC / JSON-RPC</li> <li>Autenticaci\u00f3n: JWT + Odoo Session</li> </ul>"},{"location":"backend/odoo_doc/bloste_core/#modulos-de-odoo-utilizados","title":"M\u00f3dulos de Odoo Utilizados","text":"<ul> <li>base: Funcionalidad base (usuarios, grupos, permisos)</li> <li>sale: Gesti\u00f3n de ventas y \u00f3rdenes</li> <li>product: Gesti\u00f3n de productos</li> <li>portal: Funcionalidad de portal para usuarios externos</li> </ul>"},{"location":"backend/odoo_doc/bloste_core/#componentes-del-modulo-bloste-core","title":"Componentes del M\u00f3dulo Bloste Core","text":""},{"location":"backend/odoo_doc/bloste_core/#models-logica-de-negocio","title":"Models (L\u00f3gica de negocio)","text":"<ul> <li><code>bloste.subscription</code>: Planes de suscripci\u00f3n</li> <li><code>bloste.user_subscription</code>: Historial usuario-suscripci\u00f3n</li> <li><code>res.users (inherit)</code>: Extensi\u00f3n del modelo de usuarios</li> <li><code>product.template (inherit)</code>: Extensi\u00f3n de productos</li> </ul>"},{"location":"backend/odoo_doc/bloste_core/#views-interfaz-de-usuario","title":"Views (Interfaz de usuario)","text":"<ul> <li>Formularios y listas para gesti\u00f3n de suscripciones</li> <li>Vistas personalizadas de usuarios con campos Bloste</li> <li>Men\u00fas de navegaci\u00f3n personalizados</li> </ul>"},{"location":"backend/odoo_doc/bloste_core/#security-control-de-acceso","title":"Security (Control de acceso)","text":"<ul> <li>Reglas de acceso basadas en grupos de Odoo</li> <li>Permisos CRUD granulares por modelo</li> </ul>"},{"location":"backend/odoo_doc/bloste_core/#computed-fields","title":"Computed Fields","text":"<ul> <li>active_subscription_id: Calcula autom\u00e1ticamente la suscripci\u00f3n activa del usuario</li> <li>subscription_expiry_date: Calcula la fecha de expiraci\u00f3n de la suscripci\u00f3n activa</li> <li>end_date (en user_subscription): Calcula la fecha de fin basada en duraci\u00f3n</li> </ul>"},{"location":"backend/odoo_doc/bloste_core/#flujo-de-datos","title":"Flujo de Datos","text":"<ol> <li>Creaci\u00f3n de plan: Admin crea <code>bloste.subscription</code> con precio y duraci\u00f3n</li> <li>Asignaci\u00f3n: Admin usa <code>new_subscription_id</code> en usuario</li> <li>Registro autom\u00e1tico: Se crea <code>bloste.user_subscription</code> con fecha de inicio</li> <li>C\u00e1lculo de caducidad: <code>end_date</code> se calcula autom\u00e1ticamente</li> <li>Actualizaci\u00f3n de estado: <code>active_subscription_id</code> se actualiza autom\u00e1ticamente</li> <li>Consulta externa: APIs consultan <code>active_subscription_id</code> y <code>subscription_expiry_date</code></li> </ol>"},{"location":"backend/odoo_doc/bloste_core/#seguridad-y-permisos","title":"Seguridad y Permisos","text":""},{"location":"backend/odoo_doc/bloste_core/#grupos-de-odoo","title":"Grupos de Odoo","text":"<ul> <li>Portal User (<code>base.group_portal</code>): Usuario b\u00e1sico con acceso limitado</li> <li>Internal User (<code>base.group_user</code>): Usuario interno con acceso a backend</li> <li>System Administrator (<code>base.group_system</code>): Administrador con acceso completo</li> </ul>"},{"location":"backend/odoo_doc/bloste_core/#sincronizacion-de-roles","title":"Sincronizaci\u00f3n de Roles","text":"<ul> <li>Usuario con <code>bloste_status='admin'</code> \u2192 Se asignan grupos de administrador de Odoo</li> <li>Usuario con <code>bloste_status='user'</code> \u2192 Se mantiene como usuario portal</li> </ul>"},{"location":"backend/odoo_doc/bloste_core/#integraciones","title":"Integraciones","text":""},{"location":"backend/odoo_doc/bloste_core/#api-restjson-rpc","title":"API REST/JSON-RPC","text":"<ul> <li>Consulta de estado de suscripci\u00f3n por UUID</li> <li>Validaci\u00f3n de tokens JWT</li> <li>Sincronizaci\u00f3n con servicios externos (Video Player, Admin App)</li> </ul>"},{"location":"backend/odoo_doc/bloste_core/#sistema-de-ventas","title":"Sistema de Ventas","text":"<ul> <li>Vinculaci\u00f3n de suscripciones con productos de Odoo</li> <li>Generaci\u00f3n de \u00f3rdenes de venta</li> <li>Tracking de pagos y renovaciones</li> </ul>"},{"location":"backend/odoo_doc/bloste_jwt/","title":"Gestor de tokens (bloste_jwt)","text":""},{"location":"backend/odoo_doc/bloste_web/","title":"Sitio web (bloste_web)","text":""},{"location":"backend/odoo_doc/bloste_web/#bloste-web-modulo-de-sitio-web","title":"Bloste Web - M\u00f3dulo de Sitio Web","text":""},{"location":"backend/odoo_doc/bloste_web/#descripcion-general","title":"Descripci\u00f3n General","text":"<p><code>bloste_web</code> es el m\u00f3dulo de Odoo que proporciona la interfaz web p\u00fablica para la plataforma Bloste. Este m\u00f3dulo gestiona las p\u00e1ginas p\u00fablicas del sitio, el registro de usuarios, la visualizaci\u00f3n de planes de suscripci\u00f3n y el proceso de contrataci\u00f3n.</p> <p></p> <p>Caracter\u00edsticas principales: - P\u00e1gina de inicio (home) con hero section y caracter\u00edsticas del servicio - Sistema de registro de usuarios con validaci\u00f3n - Visualizaci\u00f3n de planes de suscripci\u00f3n - Proceso de contrataci\u00f3n de suscripciones - Integraci\u00f3n con Website Builder de Odoo - Sistema de redirecci\u00f3n inteligente para selecci\u00f3n de planes - Estilos personalizados con la paleta de colores de Bloste</p>"},{"location":"backend/odoo_doc/bloste_web/#estructura-del-modulo","title":"Estructura del M\u00f3dulo","text":"<pre><code>bloste_web/\n\u251c\u2500\u2500 __init__.py\n\u251c\u2500\u2500 __manifest__.py\n\u251c\u2500\u2500 controllers/\n\u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u2514\u2500\u2500 main.py\n\u251c\u2500\u2500 models/\n\u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u2514\u2500\u2500 bloste_web.py\n\u251c\u2500\u2500 views/\n\u2502   \u251c\u2500\u2500 assets.xml\n\u2502   \u251c\u2500\u2500 menus.xml\n\u2502   \u251c\u2500\u2500 templates.xml\n\u2502   \u2514\u2500\u2500 website_pages.xml\n\u251c\u2500\u2500 static/\n\u2502   \u2514\u2500\u2500 src/\n\u2502       \u251c\u2500\u2500 css/\n\u2502       \u2502   \u2514\u2500\u2500 bloste_colors.css\n\u2502       \u2514\u2500\u2500 js/\n\u2502           \u2514\u2500\u2500 subscription_redirect.js\n\u2514\u2500\u2500 security/\n    \u2514\u2500\u2500 ir.model.access.csv\n</code></pre>"},{"location":"backend/odoo_doc/bloste_web/#manifest-manifestpy","title":"Manifest (manifest.py)","text":"<pre><code>{\n    'name': 'Bloste Website',\n    'version': '1.0',\n    'depends': ['base', 'bloste_core', 'website'],\n    'author': 'Bloste Software',\n    'category': 'Bloste',\n    'license': 'LGPL-3',\n    'installable': True,\n    'application': True,\n    'data': [\n        'security/ir.model.access.csv',\n        'views/menus.xml',\n        'views/templates.xml',\n        'views/website_pages.xml',\n        'views/assets.xml',\n    ],\n}\n</code></pre> <p>Dependencias: - <code>base</code>: M\u00f3dulo base de Odoo - <code>bloste_core</code>: M\u00f3dulo core de Bloste con modelos de suscripci\u00f3n - <code>website</code>: M\u00f3dulo de sitio web de Odoo</p>"},{"location":"backend/odoo_doc/bloste_web/#modelos","title":"Modelos","text":""},{"location":"backend/odoo_doc/bloste_web/#blosteweb-blosteweb","title":"BlosteWeb (<code>bloste.web</code>)","text":"<p>Modelo auxiliar para datos relacionados con el sitio web.</p> <p>Archivo: <code>models/bloste_web.py</code></p> <pre><code>class BlosteWeb(models.Model):\n    _name = 'bloste.web'\n    _description = 'Modelo de Bloste Web'\n\n    name = fields.Char(string='Nombre', required=True)\n    description = fields.Text(string='Descripci\u00f3n')\n</code></pre> <p>Campos: - <code>name</code>: Nombre identificador (requerido) - <code>description</code>: Descripci\u00f3n del elemento</p>"},{"location":"backend/odoo_doc/bloste_web/#controladores","title":"Controladores","text":""},{"location":"backend/odoo_doc/bloste_web/#blostewebsite-controllersmainpy","title":"BlosteWebsite (<code>controllers/main.py</code>)","text":"<p>Controlador principal que gestiona todas las rutas y p\u00e1ginas p\u00fablicas del sitio web.</p>"},{"location":"backend/odoo_doc/bloste_web/#metodos-principales","title":"M\u00e9todos Principales","text":""},{"location":"backend/odoo_doc/bloste_web/#_render_website_page_with_plansurl","title":"<code>_render_website_page_with_plans(url)</code>","text":"<p>M\u00e9todo privado para renderizar p\u00e1ginas creadas en Website Builder con contexto de planes de suscripci\u00f3n.</p> <p>Par\u00e1metros: - <code>url</code> (str): URL de la p\u00e1gina a renderizar</p> <p>Retorna: Template renderizado con contexto de suscripciones</p> <p>Funcionalidad: - Busca todos los planes de suscripci\u00f3n disponibles - Busca la p\u00e1gina web por URL - Renderiza la vista con contexto de suscripciones</p>"},{"location":"backend/odoo_doc/bloste_web/#rutas-http","title":"Rutas HTTP","text":""},{"location":"backend/odoo_doc/bloste_web/#in-pagina-de-loginregistro","title":"<code>/in</code> - P\u00e1gina de Login/Registro","text":"<pre><code>@http.route('/in', type='http', auth='public', website=True)\ndef login_register(self):\n    \"\"\"Pagina de login/registre\"\"\"\n    return request.render('bloste_web.login_register_template')\n</code></pre> <p>Descripci\u00f3n: P\u00e1gina p\u00fablica de registro de usuarios con formulario completo y validaci\u00f3n.</p> <p>Caracter\u00edsticas: - Formulario de registro con validaci\u00f3n de contrase\u00f1a - Confirmaci\u00f3n de contrase\u00f1a - Validaci\u00f3n desde JavaScript - Integraci\u00f3n con API de autenticaci\u00f3n</p>"},{"location":"backend/odoo_doc/bloste_web/#suscripciones-planes-de-suscripcion","title":"<code>/suscripciones</code> - Planes de Suscripci\u00f3n","text":"<pre><code>@http.route('/suscripciones', type='http', auth='public', website=True)\ndef subscription_plans(self):\n    \"\"\"Pagina publica de plans de subscripcio\"\"\"\n    return self._render_website_page_with_plans('/suscripciones')\n</code></pre> <p>Descripci\u00f3n: P\u00e1gina que muestra todos los planes de suscripci\u00f3n disponibles.</p> <p>Caracter\u00edsticas: - Listado din\u00e1mico de planes desde BD - Dise\u00f1o responsive con cards - Botones de suscripci\u00f3n con JavaScript interactivo</p>"},{"location":"backend/odoo_doc/bloste_web/#planes-y-productos-alias-de-suscripciones","title":"<code>/planes</code> y <code>/productos</code> - Alias de Suscripciones","text":"<pre><code>@http.route('/planes', type='http', auth='public', website=True)\ndef subscription_plans_alias(self):\n    \"\"\"Alias: planes = suscripciones\"\"\"\n    return request.redirect('/suscripciones')\n\n@http.route('/productos', type='http', auth='public', website=True)\ndef products(self):\n    \"\"\"Alias: productos = planes\"\"\"\n    return request.redirect('/suscripciones')\n</code></pre> <p>Descripci\u00f3n: Rutas alternativas que redirigen a <code>/suscripciones</code>.</p>"},{"location":"backend/odoo_doc/bloste_web/#info-usuario-informacion-del-usuario","title":"<code>/info-usuario</code> - Informaci\u00f3n del Usuario","text":"<pre><code>@http.route('/info-usuario', type='http', auth='public', website=True)\ndef info_usuario(self, plan=None, **kwargs):\n    \"\"\"Pagina d'informacio de l'usuari amb pla preseleccionat\"\"\"\n</code></pre> <p>Descripci\u00f3n: P\u00e1gina con formulario para que el usuario ingrese sus credenciales y confirme la contrataci\u00f3n de un plan.</p> <p>Par\u00e1metros GET: - <code>plan</code> (opcional): Nombre del plan preseleccionado</p> <p>Caracter\u00edsticas: - Preselecci\u00f3n del plan desde URL - Formulario de autenticaci\u00f3n - Vista renderizada desde BD o template</p>"},{"location":"backend/odoo_doc/bloste_web/#info-usuariosubmit-procesamiento-de-contratacion","title":"<code>/info-usuario/submit</code> - Procesamiento de Contrataci\u00f3n","text":"<pre><code>@http.route('/info-usuario/submit', type='http', auth='public', website=True, methods=['POST'], csrf=True)\ndef info_usuario_submit(self, **post):\n    \"\"\"Processa l'enviament del formulari: autentica usuari i assigna subscripcio\"\"\"\n</code></pre> <p>Descripci\u00f3n: Endpoint POST que procesa la contrataci\u00f3n de suscripciones.</p> <p>Par\u00e1metros POST: - <code>email</code>: Email del usuario - <code>password</code>: Contrase\u00f1a del usuario - <code>subscription_plan</code>: Nombre del plan a contratar</p> <p>Flujo: 1. Validaci\u00f3n de email y contrase\u00f1a 2. B\u00fasqueda del usuario en BD 3. Verificaci\u00f3n de credenciales con <code>_check_credentials()</code> 4. B\u00fasqueda del plan de suscripci\u00f3n 5. Verificaci\u00f3n de suscripci\u00f3n existente 6. Creaci\u00f3n de nueva suscripci\u00f3n si no existe 7. Redirecci\u00f3n a p\u00e1gina de \u00e9xito</p> <p>Manejo de Errores: - Usuario no encontrado - Contrase\u00f1a incorrecta - Plan de suscripci\u00f3n no encontrado - Errores de BD</p> <p>Logging: Registra todas las operaciones importantes con <code>_logger</code></p>"},{"location":"backend/odoo_doc/bloste_web/#vistas-y-templates","title":"Vistas y Templates","text":""},{"location":"backend/odoo_doc/bloste_web/#templates-viewstemplatesxml","title":"Templates (views/templates.xml)","text":""},{"location":"backend/odoo_doc/bloste_web/#login_register_template","title":"<code>login_register_template</code>","text":"<p>Template de registro de usuarios con dise\u00f1o moderno y validaci\u00f3n.</p> <p></p> <p>Caracter\u00edsticas: - Dise\u00f1o con gradiente de colores Bloste - Card con sombra y bordes redondeados - Formulario con validaci\u00f3n de campos:   - Nombre completo   - Email   - Contrase\u00f1a (m\u00ednimo 6 caracteres)   - Confirmaci\u00f3n de contrase\u00f1a - JavaScript para validaci\u00f3n y env\u00edo as\u00edncrono - Spinner de carga durante el registro - Mensajes de \u00e9xito/error con Bootstrap alerts - Redirecci\u00f3n autom\u00e1tica tras \u00e9xito</p> <p>Endpoint de API: <code>/api/auth/register</code> (POST)</p> <p>Estilos personalizados: - Bordes redondeados (15px) - Gradiente en header - Inputs con tama\u00f1o grande (form-control-lg) - Bot\u00f3n con gradiente y animaci\u00f3n</p>"},{"location":"backend/odoo_doc/bloste_web/#paginas-del-sitio-viewswebsite_pagesxml","title":"P\u00e1ginas del Sitio (views/website_pages.xml)","text":""},{"location":"backend/odoo_doc/bloste_web/#configuracion-del-sitio-web","title":"Configuraci\u00f3n del Sitio Web","text":"<pre><code>&lt;record id=\"bloste_website\" model=\"website\"&gt;\n    &lt;field name=\"name\"&gt;Bloste&lt;/field&gt;\n    &lt;field name=\"domain\" eval=\"False\"/&gt;\n    &lt;field name=\"company_id\" ref=\"base.main_company\"/&gt;\n&lt;/record&gt;\n</code></pre>"},{"location":"backend/odoo_doc/bloste_web/#home_page_view-pagina-de-inicio","title":"<code>home_page_view</code> - P\u00e1gina de Inicio","text":"<p>Template de la p\u00e1gina principal con dise\u00f1o moderno.</p> <p></p> <p>Secciones:</p> <ol> <li>Hero Section:</li> <li>Gradiente naranja a morado</li> <li>T\u00edtulo principal \"Bienvenido a BlosteFlix\"</li> <li>Subt\u00edtulo descriptivo</li> <li> <p>Botones CTA: \"Ver Planes\" y \"Registrarse\"</p> </li> <li> <p>Caracter\u00edsticas:</p> </li> <li>Grid responsive de 3 columnas</li> <li>Iconos con emojis</li> <li>T\u00edtulos y descripciones:<ul> <li>\ud83d\udcbb Multiplataforma</li> <li>\u2713 Sin Compromisos</li> <li>\u2605 Alta Calidad</li> </ul> </li> </ol>"},{"location":"backend/odoo_doc/bloste_web/#suscripciones_page_view-pagina-de-suscripciones","title":"<code>suscripciones_page_view</code> - P\u00e1gina de Suscripciones","text":"<p>Template para mostrar planes de suscripci\u00f3n disponibles.</p> <p></p> <p>Elementos: - T\u00edtulo y descripci\u00f3n - Grid responsive de cards - Iteraci\u00f3n sobre <code>subscriptions</code> (contexto del controlador) - Para cada suscripci\u00f3n muestra:   - Nombre del plan   - Precio con formato ($XX.XX/mes)   - Duraci\u00f3n en d\u00edas   - Bot\u00f3n \"Suscribirse\" con data-plan</p> <p>Condicional: Muestra alerta si no hay planes disponibles</p> <p></p>"},{"location":"backend/odoo_doc/bloste_web/#templates-adicionales","title":"Templates Adicionales","text":"<p>El archivo contiene m\u00e1s templates incluyendo: - <code>info_usuario_page_view</code>: Formulario de informaci\u00f3n del usuario - <code>subscription_success_page_view</code>: P\u00e1gina de \u00e9xito tras contrataci\u00f3n - <code>payment_page_view</code>: P\u00e1gina de procesamiento de pago</p>"},{"location":"backend/odoo_doc/bloste_web/#menus-viewsmenusxml","title":"Men\u00fas (views/menus.xml)","text":"<p>Estructura de men\u00fas en el backend de Odoo:</p> <pre><code>&lt;menuitem id=\"bloste_website_menu\" \n          name=\"Bloste Website\" \n          sequence=\"10\"/&gt;\n\n&lt;menuitem id=\"bloste_pages_menu\" \n          name=\"P\u00e1ginas\" \n          parent=\"bloste_website_menu\" \n          action=\"website.action_website_pages_list\"/&gt;\n\n&lt;menuitem id=\"bloste_subscriptions_menu\" \n          name=\"Suscripciones\" \n          parent=\"bloste_website_menu\" \n          action=\"bloste_core.action_bloste_subscription\"/&gt;\n</code></pre> <p>Men\u00fas: 1. Bloste Website (ra\u00edz): Men\u00fa principal con icono personalizado 2. P\u00e1ginas: Acceso al gestor de p\u00e1ginas web 3. Suscripciones: Acceso a gesti\u00f3n de planes de suscripci\u00f3n</p>"},{"location":"backend/odoo_doc/bloste_web/#assets-viewsassetsxml","title":"Assets (views/assets.xml)","text":"<p>Hereda del template <code>website.layout</code> para incluir CSS personalizado:</p> <pre><code>&lt;template id=\"bloste_assets\" inherit_id=\"website.layout\"&gt;\n    &lt;xpath expr=\"//head\" position=\"inside\"&gt;\n        &lt;link rel=\"stylesheet\" href=\"/bloste_web/static/src/css/bloste_colors.css\"/&gt;\n    &lt;/xpath&gt;\n&lt;/template&gt;\n</code></pre> <p>Funcionalidad: Inyecta la hoja de estilos de colores Bloste en todas las p\u00e1ginas del sitio.</p>"},{"location":"backend/odoo_doc/bloste_web/#recursos-estaticos","title":"Recursos Est\u00e1ticos","text":""},{"location":"backend/odoo_doc/bloste_web/#css-bloste_colorscss","title":"CSS - bloste_colors.css","text":"<p>Variables CSS: </p><pre><code>:root {\n    --bloste-primary: #FC7D1C;      /* Naranja */\n    --bloste-secondary: #9A48D0;    /* Morado */\n    --bloste-white: #FFFFFF;\n    --bloste-dark: #383E45;\n    --bloste-success: #10b981;\n    --bloste-info: #06b6d4;\n    --bloste-warning: #f59e0b;\n    --bloste-danger: #ef4444;\n}\n</code></pre><p></p> <p>Clases personalizadas:</p> <ol> <li>Botones:</li> <li><code>.btn-primary</code>: Color naranja con hover</li> <li> <p><code>.btn-secondary</code>: Color morado con hover</p> </li> <li> <p>Textos:</p> </li> <li><code>.text-primary</code>: Color naranja</li> <li><code>.text-secondary</code>: Color morado</li> <li><code>.text-success</code>: Verde</li> <li><code>.text-info</code>: Cyan</li> </ol> <p>Efectos: - Estados hover con colores ligeramente m\u00e1s oscuros - Uso de <code>!important</code> para sobrescribir estilos de Bootstrap</p>"},{"location":"backend/odoo_doc/bloste_web/#javascript-subscription_redirectjs","title":"JavaScript - subscription_redirect.js","text":"<p>Funcionalidad principal:</p>"},{"location":"backend/odoo_doc/bloste_web/#1-preseleccion-de-plan-desde-url","title":"1. Preselecci\u00f3n de Plan desde URL","text":"<pre><code>var urlParams = new URLSearchParams(window.location.search);\nvar plan = urlParams.get('plan');\n\nif (plan) {\n    var planInputs = document.querySelectorAll('input[name=\"plan\"], ...');\n    planInputs.forEach(function(input) {\n        if (!input.value || input.value === '') {\n            input.value = decodeURIComponent(plan);\n        }\n    });\n}\n</code></pre> <p>Descripci\u00f3n: Captura el par\u00e1metro <code>plan</code> de la URL y lo asigna autom\u00e1ticamente a los inputs del formulario.</p>"},{"location":"backend/odoo_doc/bloste_web/#2-manejo-de-clics-en-botones-de-suscripcion","title":"2. Manejo de Clics en Botones de Suscripci\u00f3n","text":"<pre><code>function handleSubscriptionClick(e) {\n    var button = e.target.closest('a, button');\n    // ... validaciones ...\n\n    var buttonText = button.textContent.trim().toLowerCase();\n    if (buttonText.includes('suscrib') || \n        buttonText.includes('contratar') || \n        buttonText.includes('elegir')) {\n        // Extraer nombre del plan\n        var planName = '...'; // desde card parent\n\n        if (planName) {\n            e.preventDefault();\n            e.stopPropagation();\n            window.location.href = '/info-usuario?plan=' + encodeURIComponent(planName);\n        }\n    }\n}\n\ndocument.body.addEventListener('click', handleSubscriptionClick);\n</code></pre> <p>Descripci\u00f3n: - Event listener en todo el body - Detecta clics en botones con texto \"suscrib\", \"contratar\" o \"elegir\" - Excluye botones dentro de formularios de pago - Busca el nombre del plan en el card parent - Redirige a <code>/info-usuario</code> con el plan en la URL</p> <p>Selectores de b\u00fasqueda de plan: - Cards: <code>.card</code>, <code>.col-md-4</code>, <code>.s_text_block</code> - T\u00edtulos: <code>h1-h6</code>, <code>.card-title</code>, <code>.title</code>, <code>[class*=\"title\"]</code></p> <p>Logging: Console.log para debug de clics y extracci\u00f3n de planes</p>"},{"location":"backend/odoo_doc/bloste_web/#seguridad","title":"Seguridad","text":""},{"location":"backend/odoo_doc/bloste_web/#irmodelaccesscsv","title":"ir.model.access.csv","text":"<p>Define los permisos de acceso al modelo <code>bloste.web</code>:</p> <pre><code>id,name,model_id:id,group_id:id,perm_read,perm_write,perm_create,perm_unlink\naccess_bloste_web,access_bloste_web,model_bloste_web,,1,1,1,1\n</code></pre> <p>Permisos: - Read: \u2713 Lectura permitida - Write: \u2713 Escritura permitida - Create: \u2713 Creaci\u00f3n permitida - Unlink: \u2713 Eliminaci\u00f3n permitida</p> <p>Grupo: Sin grupo espec\u00edfico (todos los usuarios)</p>"},{"location":"backend/odoo_doc/bloste_web/#flujo-de-contratacion-de-suscripcion","title":"Flujo de Contrataci\u00f3n de Suscripci\u00f3n","text":"graph TD     A[Usuario visita /suscripciones] --&gt; B[Ve planes disponibles]     B --&gt; C[Clic en bot\u00f3n Suscribirse]     C --&gt; D[subscription_redirect.js captura clic]     D --&gt; E[Extrae nombre del plan]     E --&gt; F[Redirige a /info-usuario?plan=X]     F --&gt; G[Formulario precargado con plan]     G --&gt; H[Usuario ingresa email y password]     H --&gt; I[Submit a /info-usuario/submit]     I --&gt; J{\u00bfUsuario existe?}     J --&gt;|No| K[Error: usuario no encontrado]     J --&gt;|S\u00ed| L{\u00bfPassword correcto?}     L --&gt;|No| M[Error: password incorrecta]     L --&gt;|S\u00ed| N{\u00bfUsuario ya tiene este plan?}     N --&gt;|S\u00ed| O[Log: ya tiene suscripci\u00f3n]     N --&gt;|No| P[Crear bloste.user_subscription]     P --&gt; Q[Redirigir a /subscription-success]     O --&gt; Q     K --&gt; G     M --&gt; G"},{"location":"backend/odoo_doc/bloste_web/#integracion-con-otros-modulos","title":"Integraci\u00f3n con Otros M\u00f3dulos","text":""},{"location":"backend/odoo_doc/bloste_web/#bloste_core","title":"bloste_core","text":"<p>El m\u00f3dulo <code>bloste_web</code> depende de <code>bloste_core</code> para:</p> <ol> <li>Modelos de suscripci\u00f3n:</li> <li><code>bloste.subscription</code>: Planes de suscripci\u00f3n</li> <li> <p><code>bloste.user_subscription</code>: Relaci\u00f3n usuario-suscripci\u00f3n</p> </li> <li> <p>Acciones y vistas:</p> </li> <li><code>bloste_core.action_bloste_subscription</code>: Acci\u00f3n del men\u00fa de suscripciones</li> </ol> <p>Ejemplo de uso: </p><pre><code># Buscar planes disponibles\nsubscriptions = request.env['bloste.subscription'].sudo().search([])\n\n# Crear suscripci\u00f3n de usuario\nnew_subscription = request.env['bloste.user_subscription'].sudo().create({\n    'user_id': user.id,\n    'subscription_id': subscription.id,\n    'start_date': fields.Date.today(),\n})\n</code></pre><p></p>"},{"location":"backend/odoo_doc/bloste_web/#website-odoo","title":"website (Odoo)","text":"<p>Integraci\u00f3n con el m\u00f3dulo Website Builder de Odoo:</p> <ol> <li>Layout base:</li> <li>Usa <code>website.layout</code> como template padre</li> <li> <p>Hereda estilos y estructura de Odoo</p> </li> <li> <p>Gesti\u00f3n de p\u00e1ginas:</p> </li> <li>Acceso a <code>website.page</code> para p\u00e1ginas din\u00e1micas</li> <li> <p>Men\u00fa de gesti\u00f3n de p\u00e1ginas</p> </li> <li> <p>Website context:</p> </li> <li>Variable <code>website</code> disponible en templates</li> <li>Configuraci\u00f3n de dominio y compa\u00f1\u00eda</li> </ol>"},{"location":"backend/odoo_doc/bloste_web/#bloste_jwt","title":"bloste_jwt","text":"<p>Aunque no es una dependencia directa, el registro de usuarios se integra con <code>bloste_jwt</code> a trav\u00e9s del endpoint <code>/api/auth/register</code> mencionado en el JavaScript.</p>"},{"location":"backend/odoo_doc/bloste_web/#consideraciones-de-desarrollo","title":"Consideraciones de Desarrollo","text":""},{"location":"backend/odoo_doc/bloste_web/#multiidioma","title":"Multiidioma","text":"<p>El c\u00f3digo contiene comentarios mezclando catal\u00e1n y castellano: - Comentarios: Mayormente en catal\u00e1n - Contenido visible: En castellano - Mensajes de log: En catal\u00e1n</p> <p>Recomendaci\u00f3n: Unificar el idioma o implementar sistema i18n de Odoo.</p>"},{"location":"backend/odoo_doc/bloste_web/#validacion-de-contrasenas","title":"Validaci\u00f3n de Contrase\u00f1as","text":"<p>La validaci\u00f3n de contrase\u00f1as se hace en varios niveles:</p> <ol> <li>HTML5: <code>minlength=\"6\"</code> en inputs</li> <li>JavaScript: Validaci\u00f3n antes de enviar</li> <li>Backend: <code>_check_credentials()</code> de Odoo</li> </ol>"},{"location":"backend/odoo_doc/bloste_web/#uso-de-sudo","title":"Uso de sudo()","text":"<p>El c\u00f3digo usa <code>.sudo()</code> frecuentemente para operaciones de BD:</p> <pre><code>subscriptions = request.env['bloste.subscription'].sudo().search([])\nuser = request.env['res.users'].sudo().search([('login', '=', email)])\n</code></pre> <p>Prop\u00f3sito: Permitir acceso a modelos desde contexto p\u00fablico sin permisos espec\u00edficos.</p> <p>Precauci\u00f3n: Usar con cuidado para evitar bypasses de seguridad.</p>"},{"location":"backend/odoo_doc/bloste_web/#logging","title":"Logging","text":"<p>El controlador implementa logging completo:</p> <pre><code>import logging\n_logger = logging.getLogger(__name__)\n\n_logger.info(f\"Intent de contractacio - Email: {email}\")\n_logger.warning(f\"Usuari no trobat: {email}\")\n_logger.error(f\"Error al verificar credencials: {str(e)}\")\n</code></pre> <p>Niveles: - INFO: Operaciones normales - WARNING: Situaciones sospechosas - ERROR: Errores de sistema</p>"},{"location":"backend/odoo_doc/bloste_web/#mejoras-futuras","title":"Mejoras Futuras","text":"<ol> <li>Internacionalizaci\u00f3n:</li> <li>Implementar m\u00f3dulo i18n de Odoo</li> <li> <p>Traducir todos los textos a m\u00faltiples idiomas</p> </li> <li> <p>Validaci\u00f3n mejorada:</p> </li> <li>Validaci\u00f3n de formato de email en backend</li> <li>Validaci\u00f3n de complejidad de contrase\u00f1a</li> <li> <p>Rate limiting para prevenir ataques</p> </li> <li> <p>UX:</p> </li> <li>Confirmaci\u00f3n por email tras registro</li> <li>Recuperaci\u00f3n de contrase\u00f1a</li> <li> <p>Login social (OAuth)</p> </li> <li> <p>SEO:</p> </li> <li>Meta tags personalizados</li> <li>Schema.org markup</li> <li> <p>Sitemap din\u00e1mico</p> </li> <li> <p>Analytics:</p> </li> <li>Tracking de conversiones</li> <li>An\u00e1lisis de embudos</li> <li> <p>A/B testing de p\u00e1ginas</p> </li> <li> <p>Seguridad:</p> </li> <li>Captcha en formularios</li> <li>Rate limiting</li> <li>HTTPS obligatorio</li> <li>Content Security Policy</li> </ol>"},{"location":"backend/odoo_doc/bloste_web/#comandos-utiles","title":"Comandos \u00datiles","text":"<pre><code># Actualizar m\u00f3dulo\nodoo-bin -u bloste_web -d bloste_db\n\n# Instalar m\u00f3dulo\nodoo-bin -i bloste_web -d bloste_db\n\n# Ver logs en tiempo real\ntail -f /var/log/odoo/odoo.log | grep bloste_web\n\n# Verificar rutas registradas\n# En Odoo shell:\nrequest.env['ir.http']._get_routing()\n</code></pre>"},{"location":"backend/odoo_doc/bloste_web/#testing","title":"Testing","text":"<p>Para probar el m\u00f3dulo:</p> <p></p> <ol> <li> <p>P\u00e1gina de inicio: </p><pre><code>http://localhost:8069/\n</code></pre><p></p> </li> <li> <p>Registro: </p><pre><code>http://localhost:8069/in\n</code></pre><p></p> </li> <li> <p>Planes: </p><pre><code>http://localhost:8069/suscripciones\n</code></pre><p></p> </li> <li> <p>Contrataci\u00f3n: </p><pre><code>http://localhost:8069/info-usuario?plan=Premium\n</code></pre><p></p> </li> <li> <p>Backend: </p><pre><code>http://localhost:8069/web\n\u2192 Men\u00fa: Bloste Website\n</code></pre><p></p> </li> </ol>"},{"location":"frontend/administrador_contenidos/","title":"Administrador de contenidos (VUE)","text":""},{"location":"frontend/administrador_contenidos/#administrador-contenidos-vue","title":"Administrador Contenidos (VUE)","text":""},{"location":"frontend/administrador_contenidos/#descripcion","title":"Descripci\u00f3n","text":"<p>Aplicaci\u00f3n web para la gesti\u00f3n de contenidos de video, permitiendo a los administradores subir nuevos videos y gestionar el cat\u00e1logo de videos disponibles para los usuarios finales.</p>"},{"location":"frontend/administrador_contenidos/#responsabilidades","title":"Responsabilidades","text":"<ul> <li>Subida de  videos al servidor de contenidos</li> <li>Edicion de datos del catalogo de videos (t\u00edtulo, descripci\u00f3n, categor\u00edas)</li> </ul>"},{"location":"frontend/administrador_contenidos/#interaccion","title":"Interacci\u00f3n","text":"<p>Este componente interactua con:</p> <ul> <li><code>Login/Signin</code> (Backend Odoo)</li> <li><code>Cat\u00e1logo</code> (Backend SpringBoot)</li> <li><code>VideoServer</code> (Backend ExpressJS)</li> </ul>"},{"location":"frontend/administrador_contenidos/#endpoints","title":"Endpoints","text":"<p>Endpoint usados por la app de administraci\u00f3n:</p>"},{"location":"frontend/administrador_contenidos/#endpoints-catalogo","title":"Endpoints catalogo","text":"<ul> <li>POST <code>api/catalogo</code>: Registra nueva entrada de video</li> <li>PUT <code>api/catalogo/:id</code>: Modificar datos de un video existente</li> <li>GET <code>api/catalogo/:id</code>: Obtener datos de un video existente en espec\u00edfico para edici\u00f3n</li> <li>GET <code>api/catalogo</code>: Obtener lista completa de videos para mostrar en el panel de administraci\u00f3n</li> <li>GET <code>api/categorias</code>: Obtener lista de categor\u00edas disponibles</li> </ul>"},{"location":"frontend/administrador_contenidos/#endpoints-del-servidor-de-contenidos","title":"Endpoints del servidor de contenidos","text":"<ul> <li>POST <code>api/upload</code>: Subir un video en bruto para procesar y generar los segmentos, miniaturas y metadatos t\u00e9cnicos</li> </ul>"},{"location":"frontend/administrador_contenidos/#casos-de-uso","title":"Casos de uso","text":"flowchart LR     Admin([\ud83d\udc64 Administrador])     AppAdmin([\ud83d\udda5\ufe0f App Administraci\u00f3n])      subgraph Servidor de contenidos ExpressJS         SubirVideo([Subir video /api/upload])         ConectarWS([Conectar WebSocket])         RecibirMeta([Recibir metadatos])     end       subgraph Catalogo SpringBoot         RegistrarVideo([Registrar video al cat\u00e1logo])         ModificarVideo([Editar cat\u00e1logo])     end      subgraph Seguridad Odoo         Login([Iniciar sesi\u00f3n])         Signin([Registrar nuevo administrador])     end      Admin --&gt; AppAdmin      AppAdmin --&gt; Login     AppAdmin --&gt; Signin      AppAdmin --&gt; SubirVideo     SubirVideo --&gt; RecibirMeta     RecibirMeta --&gt; AppAdmin      SubirVideo --&gt; ConectarWS      AppAdmin --&gt; RegistrarVideo     AppAdmin --&gt; ModificarVideo"},{"location":"frontend/administrador_contenidos/#diagramas-de-flujo","title":"Diagramas de flujo","text":""},{"location":"frontend/administrador_contenidos/#autenticacion-del-administrador","title":"Autenticaci\u00f3n del Administrador","text":""},{"location":"frontend/administrador_contenidos/#gestion-de-contenido-subida","title":"Gesti\u00f3n de Contenido: Subida","text":""},{"location":"frontend/administrador_contenidos/#gestion-de-contenido-edicion","title":"Gesti\u00f3n de Contenido: Edici\u00f3n","text":""},{"location":"frontend/administrador_contenidos/#uiux","title":"UI/UX","text":""},{"location":"frontend/administrador_contenidos/#login","title":"Login","text":""},{"location":"frontend/administrador_contenidos/#registro","title":"Registro","text":""},{"location":"frontend/administrador_contenidos/#subida-de-video","title":"Subida de video","text":"<p>Sin video de seleccionado:</p> <p></p> <p>Con video de seleccionado:</p> <p></p>"},{"location":"frontend/administrador_contenidos/#panel-de-edicion-de-video","title":"Panel de edici\u00f3n de video","text":""},{"location":"frontend/administrador_contenidos/#popup-de-edicion-de-video","title":"Popup de edici\u00f3n de video","text":""},{"location":"frontend/video_reproductor/","title":"Reproductor de videos (Flutter)","text":""},{"location":"frontend/video_reproductor/#reproductor-movil","title":"Reproductor M\u00f3vil","text":"<p>Este es el reproductor principal de blosteflix, una app m\u00f3vil multiplataforma desarrollada con Flutter para consultar el cat\u00e1logo y reproducir contenido.</p>"},{"location":"frontend/video_reproductor/#showcase","title":"Showcase","text":""},{"location":"frontend/video_reproductor/#arquitectura","title":"Arquitectura","text":"<p>La aplicaci\u00f3n est\u00e1 construida siguiendo los principios de Clean Architecture, dividida en tres capas principales:</p> <ul> <li>Domain: Entidades, repositorios abstractos y casos de uso</li> <li>Infrastructure: Implementaci\u00f3n de repositorios, APIs y mappers de datos</li> <li>Presentation: Interfaces de usuario, providers de estado y servicios</li> </ul>"},{"location":"frontend/video_reproductor/#tecnologias-principales","title":"Tecnolog\u00edas principales","text":"<ul> <li>Flutter (SDK 3.10.7+): Framework multiplataforma</li> <li>Riverpod: Gesti\u00f3n de estado reactiva</li> <li>Chewie + Video Player: Reproducci\u00f3n de video HLS</li> <li>Flutter Secure Storage: Almacenamiento seguro de tokens</li> <li>HTTP: Comunicaci\u00f3n con APIs REST</li> </ul>"},{"location":"frontend/video_reproductor/#que-hace","title":"Que hace ?","text":"<ul> <li>Login y registro de usuarios con JWT</li> <li>Autenticaci\u00f3n con tokens de acceso y refresh</li> <li>Muestra cat\u00e1logo de videos con scroll infinito</li> <li>B\u00fasqueda y filtrado de contenido por categor\u00edas</li> <li>Reproduce videos en formato HLS con selecci\u00f3n de calidad (Auto, 480p, 720p, 1080p)</li> <li>Visualizaci\u00f3n de videos relacionados</li> <li>Gesti\u00f3n de cuenta de usuario</li> </ul>"},{"location":"frontend/video_reproductor/#interaccion","title":"Interacci\u00f3n","text":"<p>Este componente interact\u00faa con:</p> <ul> <li>Cat\u00e1logo Backend: Gesti\u00f3n de videos y categor\u00edas</li> <li>Auth Backend: Autenticaci\u00f3n y gesti\u00f3n de usuarios</li> <li>Media Backend: Streaming HLS de videos</li> </ul>"},{"location":"frontend/video_reproductor/#endpoints","title":"Endpoints","text":""},{"location":"frontend/video_reproductor/#endpoints-de-autenticacion","title":"Endpoints de autenticaci\u00f3n","text":"<ul> <li><code>POST /api/auth/token</code>: Login de usuario (retorna access y refresh tokens)</li> <li><code>POST /api/auth/register</code>: Registro de nuevo usuario</li> <li><code>POST /api/auth/refresh</code>: Renovaci\u00f3n de access token usando refresh token</li> <li><code>GET /api/users/me</code>: Obtener detalles del usuario autenticado (requiere Bearer token)</li> </ul>"},{"location":"frontend/video_reproductor/#endpoints-catalogo","title":"Endpoints cat\u00e1logo","text":"<ul> <li><code>GET /api/catalogo</code>: Recibe videos paginados (params: page, size, categoriaId opcional). La paginaci\u00f3n es 0-indexed (page=0 para la primera p\u00e1gina)</li> <li><code>GET /api/catalogo/search</code>: B\u00fasqueda de videos por t\u00edtulo (params: titulo, page, size). La paginaci\u00f3n es 0-indexed</li> <li><code>GET /api/catalogo/:id</code>: Recibe detalles de un video espec\u00edfico</li> <li><code>GET /api/categorias</code>: Recibe categor\u00edas paginadas (params: page, size). La paginaci\u00f3n es 0-indexed</li> <li><code>GET /api/categorias/:id</code>: Recibe una categor\u00eda espec\u00edfica</li> </ul>"},{"location":"frontend/video_reproductor/#endpoints-video-backend-media-server","title":"Endpoints video backend (Media Server)","text":"<p>Todos los endpoints de media requieren autenticaci\u00f3n Bearer token en el header: + <code>GET /api/hls/:videoid/master.m3u8</code>: Playlist HLS adaptativo (Auto) + <code>GET /api/hls/:videoid/480/playlist.m3u8</code>: Playlist para calidad 480p + <code>GET /api/hls/:videoid/720/playlist.m3u8</code>: Playlist para calidad 720p + <code>GET /api/hls/:videoid/1080/playlist.m3u8</code>: Playlist para calidad 1080p + <code>GET /api/hls/:videoid/:segment.ts</code>: Recibe los segmentos de video para reproducci\u00f3n</p>"},{"location":"frontend/video_reproductor/#casos-de-uso","title":"Casos de uso","text":"flowchart LR     User([\ud83d\udc64 User])     Player([\ud83c\udfac Video Player])      subgraph Servidor_Cat\u00e1logo        VerCatalogo([Ver cat\u00e1logo])        Filtrar([Buscar/Filtrar contenido])        Detalles([Ver detalles])        Categorias([Ver categor\u00edas])     end      subgraph Servidor_Video         ReproducirVideo([Reproducir Video])         SeleccionarCalidad([Seleccionar calidad])         VideosRelacionados([Ver relacionados])     end      subgraph Servidor_Auth         Login([Login])         Registro([Registro])         RefreshToken([Renovar sesi\u00f3n])         GestionCuenta([Gesti\u00f3n de cuenta])     end      User --&gt; Player     Player --&gt; VerCatalogo     Player --&gt; ReproducirVideo     Player --&gt; Login     Player --&gt; Registro     Player --&gt; Filtrar     Player --&gt; Detalles     Player --&gt; Categorias     Player --&gt; SeleccionarCalidad     Player --&gt; VideosRelacionados     Player --&gt; RefreshToken     Player --&gt; GestionCuenta"},{"location":"frontend/video_reproductor/#diagramas-de-flujo","title":"Diagramas de flujo","text":""},{"location":"frontend/video_reproductor/#explorar-catalogo","title":"Explorar cat\u00e1logo","text":""},{"location":"frontend/video_reproductor/#buscar-contenidos","title":"Buscar contenidos","text":""},{"location":"frontend/video_reproductor/#consultar-detalle-de-un-video","title":"Consultar detalle de un video","text":""},{"location":"frontend/video_reproductor/#iniciar-sesion-registro","title":"Iniciar sesi\u00f3n / Registro","text":""},{"location":"frontend/video_reproductor/#reproducir-video","title":"Reproducir video","text":""},{"location":"frontend/video_reproductor/#renovar-token-de-acceso","title":"Renovar token de acceso","text":""},{"location":"frontend/video_reproductor/#ver-videos-relacionados","title":"Ver videos relacionados","text":""},{"location":"frontend/video_reproductor/#filtrar-por-categorias","title":"Filtrar por categor\u00edas","text":""}]}